# 018. ë¡œê·¸ì¸ ìƒíƒœ ì „ì—­ ê´€ë¦¬ (Zustand)

ZustandëŠ” ê°€ë³ê³  ê°„ë‹¨í•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì „ì—­ ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬ì—ë„ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ ì˜ˆì œì—ì„œëŠ” ì‚¬ìš©ì ì •ë³´ì™€ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ ìƒíƒœë¡œ ì €ì¥í•˜ê³ , ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- `create()`ë¡œ ì „ì—­ ìƒíƒœ ìƒì„±
- `user`, `isAuthenticated` ìƒíƒœ í¬í•¨
- `login()`, `logout()` í•¨ìˆ˜ ì œê³µ
- ìƒˆë¡œê³ ì¹¨ ì‹œ `localStorage` ë™ê¸°í™” ê³ ë ¤

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ìƒíƒœ ì •ì˜ (src/store/useAuthStore.js)

```js
import { create } from 'zustand';

const useAuthStore = create((set) => ({
  user: null,
  token: null,
  isAuthenticated: false,

  login: ({ user, token }) => {
    localStorage.setItem('user', JSON.stringify(user));
    localStorage.setItem('token', token);
    set({ user, token, isAuthenticated: true });
  },

  logout: () => {
    localStorage.clear();
    set({ user: null, token: null, isAuthenticated: false });
  },
}));

export default useAuthStore;
```

---

### 2. ë¡œê·¸ì¸ ì²˜ë¦¬ (src/pages/Login.js)

```jsx
import React, { useState } from 'react';
import useAuthStore from '../store/useAuthStore';
import axios from 'axios';
import { useNavigate } from 'react-router-dom';

const Login = () => {
  const { login } = useAuthStore();
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleLogin = async () => {
    const res = await axios.post('/login', { email, password });
    login({ user: res.data.user, token: res.data.token });
    navigate('/dashboard');
  };

  return (
    <div>
      <h2>Zustand ë¡œê·¸ì¸</h2>
      <input value={email} onChange={(e) => setEmail(e.target.value)} />
      <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} />
      <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
    </div>
  );
};

export default Login;
```

---

### 3. ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ (src/components/LogoutButton.js)

```jsx
import useAuthStore from '../store/useAuthStore';
import { useNavigate } from 'react-router-dom';

const LogoutButton = () => {
  const { logout } = useAuthStore();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  return <button onClick={handleLogout}>ë¡œê·¸ì•„ì›ƒ</button>;
};

export default LogoutButton;
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- ZustandëŠ” ê°„ë‹¨í•œ APIì™€ í›… ê¸°ë°˜ êµ¬ì¡°ë¡œ ê°€ë³ê²Œ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
- ë¡œê·¸ì¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ë©´ ì•± ì§„ì… ì‹œ `localStorage`ì—ì„œ ìƒíƒœ ë³µì› í•„ìš”
- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
