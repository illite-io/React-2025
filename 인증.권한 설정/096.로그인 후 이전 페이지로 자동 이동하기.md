# 096. ë¡œê·¸ì¸ í›„ ì´ì „ í˜ì´ì§€ë¡œ ìë™ ì´ë™í•˜ê¸°

## ğŸ“„ ì„¤ëª…

ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ íŠ¹ì • í˜ì´ì§€ì— ì ‘ê·¼í•˜ë ¤ í•  ë•Œ,  
ë¡œê·¸ì¸ í›„ í•´ë‹¹ í˜ì´ì§€ë¡œ **ìë™ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™**ë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.  
ì¦‰, ë¡œê·¸ì¸ í›„ "ì›ë˜ ê°€ë ¤ë˜ í˜ì´ì§€"ë¡œ ë³µê·€í•˜ëŠ” íë¦„ì…ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- React Routerì˜ `useLocation`ê³¼ `state` í™œìš©
- ë¡œê·¸ì¸ í›„ `navigate(location.state?.from || '/')`
- ë³´í˜¸ ë¼ìš°íŠ¸ì—ì„œ `state: { from: location.pathname }` ì„¤ì •

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ë³´í˜¸ ë¼ìš°íŠ¸ì—ì„œ í˜„ì¬ ê²½ë¡œ ì €ì¥

```jsx
// src/routes/PrivatePage.js

import { useLocation, Navigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

const PrivatePage = ({ children }) => {
  const { user } = useAuth();
  const location = useLocation();

  if (!user) {
    return <Navigate to="/login" replace state={{ from: location.pathname }} />;
  }

  return children;
};

export default PrivatePage;
```

---

### 2. ë¡œê·¸ì¸ í›„ ì›ë˜ ìœ„ì¹˜ë¡œ ì´ë™

```jsx
// src/pages/Login.js

import { useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

const Login = () => {
  const { setUser } = useAuth();
  const location = useLocation();
  const navigate = useNavigate();

  const handleLogin = () => {
    // ë¡œê·¸ì¸ ë¡œì§ í›„
    setUser({ name: 'í™ê¸¸ë™' });
    navigate(location.state?.from || '/');
  };

  return (
    <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
  );
};

export default Login;
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- ë¡œê·¸ì¸ í›„ ë¦¬ë””ë ‰ì…˜ì€ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ëŠ” ë° ë§¤ìš° ì¤‘ìš”
- ì£¼ì˜: `location.state`ê°€ ì—†ì„ ê²½ìš° ëŒ€ë¹„í•˜ì—¬ fallback ê²½ë¡œ ì‚¬ìš©
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë“± ì˜ˆì™¸ ìƒí™©ë„ ê³ ë ¤í•´ ìœ íš¨ì„± ê²€ì‚¬ í•„ìš”
