# 099. ì„œë²„ì—ì„œ ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ ìƒíƒœ í™•ì¸í•˜ê¸°

## ğŸ“„ ì„¤ëª…

í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ **ì¿ í‚¤ì— ë‹´ê¸´ í† í°ì„ ì„œë²„ê°€ ì½ì–´ì„œ ì¸ì¦ ì²˜ë¦¬**í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.  
ì´ ë°©ë²•ì€ `HttpOnly` ì„¤ì •ëœ ì¿ í‚¤ì— ì €ì¥ëœ JWTë¥¼ í™œìš©í•˜ì—¬  
**ë³´ì•ˆì„±ì´ ë†’ì€ ì¸ì¦ íë¦„ì„ êµ¬í˜„**í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- ì¿ í‚¤ì— ì €ì¥ëœ JWTë¥¼ ì„œë²„ì—ì„œ íŒŒì‹±í•´ ì‚¬ìš©ì ì¸ì¦
- Express, NestJS ë“± ë°±ì—”ë“œì—ì„œ `cookie-parser` ë˜ëŠ” ì§ì ‘ ì¿ í‚¤ íŒŒì‹±
- í† í° ìœ íš¨ì„± ê²€ì‚¬ í›„ ì‚¬ìš©ì ì •ë³´ ë³µì›

---

## âœ… ì˜ˆì‹œ ì½”ë“œ (Express.js ë°±ì—”ë“œ ê¸°ì¤€)

```js
// server.js

const express = require('express');
const cookieParser = require('cookie-parser');
const jwt = require('jsonwebtoken');

const app = express();
app.use(cookieParser());

app.get('/api/me', (req, res) => {
  const token = req.cookies.token;

  if (!token) {
    return res.status(401).json({ message: 'ì¸ì¦ í•„ìš”' });
  }

  try {
    const user = jwt.verify(token, 'secret-key');
    res.json(user);
  } catch (err) {
    res.status(401).json({ message: 'í† í° ë§Œë£Œ ë˜ëŠ” ìœ íš¨í•˜ì§€ ì•ŠìŒ' });
  }
});
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- `cookie-parser` ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ `req.cookies.token`ìœ¼ë¡œ ì ‘ê·¼
- ë°±ì—”ë“œì—ì„œ `HttpOnly` ì¿ í‚¤ì— í† í°ì„ ì„¤ì •í•´ì•¼ XSS ë°©ì§€ ê°€ëŠ¥
- ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR)ì—ì„œë„ ì´ ë°©ì‹ì€ ê°•ë ¥í•œ ë³´ì•ˆ íë¦„ ì œê³µ
