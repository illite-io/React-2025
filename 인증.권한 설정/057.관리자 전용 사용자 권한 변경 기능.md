# β… 057. κ΄€λ¦¬μ μ „μ© μ‚¬μ©μ κ¶ν• λ³€κ²½ κΈ°λ¥

### π“„ μ„¤λ…

κ΄€λ¦¬μκ°€ μ‚¬μ©μ λ©λ΅μ—μ„ κ° μ‚¬μ©μμ κ¶ν•(role)μ„
**μΌλ° μ‚¬μ©μ β†” κ΄€λ¦¬μ**λ΅ λ³€κ²½ν•  μ μλ” κΈ°λ¥μ…λ‹λ‹¤.
λ²„νΌ λλ” λ“λ΅­λ‹¤μ΄ λ°©μ‹μΌλ΅ μ²λ¦¬ν•©λ‹λ‹¤.

---

## β… μ£Όμ” ν¬μΈνΈ

* μ‚¬μ©μμ `role` ν•„λ“λ¥Ό μμ • (μ: 'user' β†’ 'admin')
* `PATCH /api/users/:id` API μ‚¬μ©
* UIμ—μ„ κ¶ν• μ„ νƒ λλ” λ²„νΌ ν΄λ¦­μΌλ΅ λ³€κ²½

---

### π“ μμ‹ μ½”λ“

```jsx
// src/components/UserRoleControl.js

import axios from 'axios';

const UserRoleControl = ({ user, onUpdated }) => {
  const handleToggleRole = () => {
    const newRole = user.role === 'admin' ? 'user' : 'admin';
    axios
      .patch(`/api/users/${user.id}`, { role: newRole })
      .then(() => onUpdated());
  };

  return (
    <button onClick={handleToggleRole}>
      {user.role === 'admin' ? 'κ΄€λ¦¬μ ν•΄μ ' : 'κ΄€λ¦¬μλ΅ μΉκ²©'}
    </button>
  );
};

export default UserRoleControl;
```

---

### β… μ‚¬μ©μ λ©λ΅μ—μ„ μ‚¬μ©

```jsx
// src/pages/AdminUserList.js λ‚΄λ¶€

import UserRoleControl from '../components/UserRoleControl';

{users.map((u) => (
  <tr key={u.id}>
    <td>{u.name}</td>
    <td>{u.email}</td>
    <td>{u.role}</td>
    <td>
      <UserRoleControl user={u} onUpdated={refetchUsers} />
    </td>
  </tr>
))}
```

> `refetchUsers()`λ” μ‚¬μ©μ λ©λ΅μ„ λ‹¤μ‹ λ¶λ¬μ¤λ” ν•¨μμ…λ‹λ‹¤.

---

### π“ μ¶”κ°€ μ„¤λ…

* μ‚¬μ©μ κ¶ν• λ³€κ²½μ€ λ³΄μ•μƒ μ¤‘μ”ν• κΈ°λ¥μ΄λ―€λ΅ λ°λ“μ‹ μΈμ¦λ κ΄€λ¦¬μλ§ μ‚¬μ© κ°€λ¥ν•κ² ν•΄μ•Ό ν•¨
* PATCH μ”μ²­ μ‹ μ„λ²„μ—μ„ ν„μ¬ λ΅κ·ΈμΈν• μ‚¬μ©μμ κ¶ν• κ²€μ¦μ΄ ν•„μ”
* UIμƒ λ“λ΅­λ‹¤μ΄μΌλ΅ μ—¬λ¬ κ¶ν•μ΄ μμ„ κ²½μ° μ„ νƒν•μΌλ΅ κµ¬ν„ κ°€λ¥
