# 038. ë¡œê·¸ì¸ ì‹œ ì´ì „ ìœ„ì¹˜ë¡œ ìë™ ì´ë™ ì²˜ë¦¬

ë¡œê·¸ì¸ì´ í•„ìš”í•œ í˜ì´ì§€ì— ë¹„ë¡œê·¸ì¸ ìƒíƒœë¡œ ì ‘ê·¼í–ˆì„ ê²½ìš°,  
ë¡œê·¸ì¸ í›„ **ì›ë˜ ê°€ë ¤ê³  í–ˆë˜ í˜ì´ì§€**ë¡œ ìë™ ì´ë™ë˜ë„ë¡ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- `react-router-dom`ì˜ `useLocation` ì‚¬ìš©
- ë¡œê·¸ì¸ ì„±ê³µ ì‹œ `location.state.from`ìœ¼ë¡œ ì´ë™
- ê¸°ë³¸ ê²½ë¡œëŠ” `/`ë¡œ ì„¤ì •

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ë¡œê·¸ì¸ ì „ ì ‘ê·¼ ì‹œ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì €ì¥ (src/routes/ProtectedRoute.js)

```jsx
import { Navigate, useLocation } from 'react-router-dom';
import useAuthStore from '../store/useAuthStore';

const ProtectedRoute = ({ children }) => {
  const { isAuthenticated } = useAuthStore();
  const location = useLocation();

  if (!isAuthenticated) {
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  return children;
};

export default ProtectedRoute;
```

---

### 2. ë¡œê·¸ì¸ ì„±ê³µ í›„ ì›ë˜ ìœ„ì¹˜ë¡œ ì´ë™ (src/pages/LoginPage.js)

```jsx
import { useLocation, useNavigate } from 'react-router-dom';

const LoginPage = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const from = location.state?.from?.pathname || '/';

  const handleLogin = async () => {
    // ë¡œê·¸ì¸ ì„±ê³µ ë¡œì§ ìˆ˜í–‰ í›„
    navigate(from, { replace: true });
  };

  return (
    <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
  );
};

export default LoginPage;
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- ì´ íë¦„ì„ í†µí•´ ì‚¬ìš©ì ê²½í—˜(UX)ì„ ë†’ì¼ ìˆ˜ ìˆìŒ
- ë¡œê·¸ì¸ ì „ â†’ ë¡œê·¸ì¸ â†’ ë‹¤ì‹œ í•´ë‹¹ ìœ„ì¹˜ ë¡œ ëŒì•„ì˜¤ëŠ” êµ¬ì¡°
- ë¡œê·¸ì¸ í˜ì´ì§€ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì¸ì¦ íë¦„ì—ë„ ë™ì¼í•˜ê²Œ í™œìš© ê°€ëŠ¥
