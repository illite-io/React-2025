# 017. ë¡œê·¸ì¸ ìƒíƒœ ì „ì—­ ê´€ë¦¬ (Redux Toolkit)

Redux Toolkitì„ ì‚¬ìš©í•˜ë©´ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì „ì—­ìœ¼ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì‚¬ìš©ì ì •ë³´, ì¸ì¦ ìƒíƒœ, í† í° ë“±ì„ í•˜ë‚˜ì˜ `authSlice`ë¡œ êµ¬ì„±í•˜ê³ ,  
ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œ ì´ë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ì´ˆê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- `createSlice`ë¡œ `authSlice` ìƒì„±
- `user`, `isAuthenticated`, `token` ë“± ìƒíƒœ í¬í•¨
- `login`, `logout` ì•¡ì…˜ êµ¬í˜„
- `useSelector`, `useDispatch`ë¡œ ìƒíƒœ ì‚¬ìš©

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. authSlice ì •ì˜ (src/store/authSlice.js)

```js
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  user: null,
  token: null,
  isAuthenticated: false,
};

const authSlice = createSlice({
  name: 'auth',
  initialState,
  reducers: {
    login(state, action) {
      state.user = action.payload.user;
      state.token = action.payload.token;
      state.isAuthenticated = true;
    },
    logout(state) {
      state.user = null;
      state.token = null;
      state.isAuthenticated = false;
    },
  },
});

export const { login, logout } = authSlice.actions;
export default authSlice.reducer;
```

---

### 2. store ì„¤ì • (src/store/index.js)

```js
import { configureStore } from '@reduxjs/toolkit';
import authReducer from './authSlice';

const store = configureStore({
  reducer: {
    auth: authReducer,
  },
});

export default store;
```

---

### 3. Appì— Provider ì—°ê²° (src/App.js)

```jsx
import React from 'react';
import { Provider } from 'react-redux';
import store from './store';
import MainRoutes from './MainRoutes';

function App() {
  return (
    <Provider store={store}>
      <MainRoutes />
    </Provider>
  );
}

export default App;
```

---

### 4. ë¡œê·¸ì¸ ì²˜ë¦¬ (src/pages/Login.js)

```jsx
import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { login } from '../store/authSlice';
import axios from 'axios';
import { useNavigate } from 'react-router-dom';

const Login = () => {
  const dispatch = useDispatch();
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleLogin = async () => {
    const res = await axios.post('/login', { email, password });
    dispatch(login({ user: res.data.user, token: res.data.token }));
    navigate('/dashboard');
  };

  return (
    <div>
      <h2>ë¡œê·¸ì¸</h2>
      <input value={email} onChange={(e) => setEmail(e.target.value)} />
      <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} />
      <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
    </div>
  );
};

export default Login;
```

---

### 5. ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ (src/components/LogoutButton.js)

```jsx
import { useDispatch } from 'react-redux';
import { logout } from '../store/authSlice';
import { useNavigate } from 'react-router-dom';

const LogoutButton = () => {
  const dispatch = useDispatch();
  const navigate = useNavigate();

  const handleLogout = () => {
    dispatch(logout());
    localStorage.clear();
    navigate('/login');
  };

  return <button onClick={handleLogout}>ë¡œê·¸ì•„ì›ƒ</button>;
};

export default LogoutButton;
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- `Redux Toolkit`ì€ boilerplateë¥¼ ì¤„ì—¬ì£¼ê³  ìƒíƒœë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë° ì í•©í•©ë‹ˆë‹¤.
- ìƒˆë¡œê³ ì¹¨ ì‹œ `localStorage`ë¥¼ í†µí•´ ì´ˆê¸° ìƒíƒœ ë³µì›ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `isAuthenticated`ë¥¼ í†µí•´ ì¸ì¦ ì—¬ë¶€ í™•ì¸ í›„ ë¼ìš°íŒ… ì œì–´ ê°€ëŠ¥
