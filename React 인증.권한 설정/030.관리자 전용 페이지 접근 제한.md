# 030. ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ ì ‘ê·¼ ì œí•œ

ì‚¬ìš©ìì˜ `role` ë˜ëŠ” `ê¶Œí•œ ë“±ê¸‰` ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŠ¹ì • í˜ì´ì§€ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œí•œí•©ë‹ˆë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´, `admin` ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ê´€ë¦¬ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- ì‚¬ìš©ì ì •ë³´ì— `role` ë˜ëŠ” `isAdmin` ì†ì„±ì´ í¬í•¨ë˜ì–´ì•¼ í•¨
- `ProtectedRoute` ë˜ëŠ” `AdminRoute` ì»´í¬ë„ŒíŠ¸ì—ì„œ ê¶Œí•œ í™•ì¸
- ë¯¸í—ˆìš© ì ‘ê·¼ ì‹œ ë¦¬ë””ë ‰ì…˜ ë˜ëŠ” ê²½ê³  í‘œì‹œ

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. Admin ì „ìš© ë¼ìš°íŠ¸ ì»´í¬ë„ŒíŠ¸ (src/routes/AdminRoute.js)

```jsx
import { Navigate, useLocation } from 'react-router-dom';
import useAuthStore from '../store/useAuthStore';

const AdminRoute = ({ children }) => {
  const { isAuthenticated, user } = useAuthStore();
  const location = useLocation();

  if (!isAuthenticated || user?.role !== 'admin') {
    alert('ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ í˜ì´ì§€ì…ë‹ˆë‹¤.');
    return <Navigate to="/" state={{ from: location }} replace />;
  }

  return children;
};

export default AdminRoute;
```

---

### 2. ë¼ìš°í„° ì„¤ì •ì—ì„œ AdminRoute ì‚¬ìš© (src/MainRoutes.js)

```jsx
import { Routes, Route } from 'react-router-dom';
import AdminRoute from './routes/AdminRoute';
import AdminDashboard from './pages/AdminDashboard';

<Routes>
  <Route
    path="/admin"
    element={
      <AdminRoute>
        <AdminDashboard />
      </AdminRoute>
    }
  />
</Routes>;
```

---

### 3. ì‚¬ìš©ì ì •ë³´ ì˜ˆì‹œ

```json
{
  "name": "ê´€ë¦¬ì",
  "email": "admin@example.com",
  "role": "admin"
}
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- `role`ì€ "admin", "user", "moderator" ë“± ë‹¤ì–‘í•˜ê²Œ í™•ì¥ ê°€ëŠ¥
- `ê¶Œí•œ ì—†ìŒ`ì¼ ê²½ìš° toastë‚˜ 403 í˜ì´ì§€ë¡œ ì•ˆë‚´í•˜ë©´ UX í–¥ìƒ
- route-level ë³´ì•ˆ ì™¸ì—ë„ ì„œë²„ APIì—ì„œë„ ë°˜ë“œì‹œ ê¶Œí•œ ì²´í¬ í•„ìš”
