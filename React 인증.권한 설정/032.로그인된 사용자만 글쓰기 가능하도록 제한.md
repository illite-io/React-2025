# 032. ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ê¸€ì“°ê¸° ê°€ëŠ¥í•˜ë„ë¡ ì œí•œ

ë¹„íšŒì› ë˜ëŠ” ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¸ ì‚¬ìš©ìê°€ ê¸€ì“°ê¸° í˜ì´ì§€(`/write`)ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ê³ ,  
ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì œí•œí•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- `isAuthenticated` ìƒíƒœ ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼ ì œí•œ
- ë¯¸ì¸ì¦ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜
- `ProtectedRoute` ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ProtectedRoute ìƒì„± (src/routes/ProtectedRoute.js)

```jsx
import { Navigate, useLocation } from 'react-router-dom';
import useAuthStore from '../store/useAuthStore';

const ProtectedRoute = ({ children }) => {
  const { isAuthenticated } = useAuthStore();
  const location = useLocation();

  if (!isAuthenticated) {
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  return children;
};

export default ProtectedRoute;
```

---

### 2. Route ì„¤ì •ì—ì„œ ê¸€ì“°ê¸° ë³´í˜¸ (src/MainRoutes.js)

```jsx
import { Route, Routes } from 'react-router-dom';
import ProtectedRoute from './routes/ProtectedRoute';
import WritePage from './pages/WritePage';

<Routes>
  <Route
    path="/write"
    element={
      <ProtectedRoute>
        <WritePage />
      </ProtectedRoute>
    }
  />
</Routes>;
```

---

### 3. ë¡œê·¸ì¸ í›„ ìë™ ë¦¬ë””ë ‰ì…˜ ì²˜ë¦¬ (src/pages/LoginPage.js)

```jsx
import { useLocation, useNavigate } from 'react-router-dom';

const location = useLocation();
const navigate = useNavigate();
const from = location.state?.from?.pathname || '/';

const handleLoginSuccess = () => {
  loginSuccessLogic();
  navigate(from, { replace: true }); // ë¡œê·¸ì¸ ì „ í˜ì´ì§€ë¡œ ì´ë™
};
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- `ê²Œì‹œê¸€ ì‘ì„±`, `ëŒ“ê¸€`, `ë§ˆì´í˜ì´ì§€` ë“±ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë³´í˜¸ ê°€ëŠ¥
- ë¹„íšŒì› ì‘ì„± í—ˆìš© ì‹œì—ëŠ” ì‚¬ìš©ì ì •ë³´ ì…ë ¥ í¼(ì´ë¦„, ë¹„ë°€ë²ˆí˜¸ ë“±) ì œê³µ
- UX ê°œì„ ì„ ìœ„í•´ ì ‘ê·¼ ì°¨ë‹¨ ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ ì¶”ê°€ë„ ê³ ë ¤
