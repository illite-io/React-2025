# 016. ë¡œê·¸ì¸ ìƒíƒœ ì „ì—­ ê´€ë¦¬ (Context API)

Reactì—ì„œ ì „ì—­ì ìœ¼ë¡œ ë¡œê·¸ì¸ ìƒíƒœì™€ ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ Context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°„ë‹¨í•˜ê³  ì§ê´€ì ì…ë‹ˆë‹¤.  
`AuthContext`ë¥¼ ë§Œë“¤ê³ , `user`, `isAuthenticated`, `login()`, `logout()` í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ì—¬ ì „ì²´ ì•±ì—ì„œ ê³µìœ í•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- `createContext()`ë¡œ AuthContext ìƒì„±
- Providerì—ì„œ ì‚¬ìš©ì ìƒíƒœ ë° ì¸ì¦ í•¨ìˆ˜ ì •ì˜
- `useContext()` í›…ìœ¼ë¡œ ì–´ë””ì„œë“  ì ‘ê·¼ ê°€ëŠ¥
- ì•± ë£¨íŠ¸ì—ì„œ `<AuthProvider>`ë¡œ ê°ì‹¸ê¸°

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. AuthContext ì •ì˜ (src/contexts/AuthContext.js)

```jsx
import React, { createContext, useState, useContext } from 'react';

const AuthContext = createContext(null);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);

  const login = (userInfo) => {
    setUser(userInfo);
    localStorage.setItem('token', userInfo.token);
    localStorage.setItem('user', JSON.stringify(userInfo));
  };

  const logout = () => {
    setUser(null);
    localStorage.clear();
  };

  const isAuthenticated = !!user;

  return (
    <AuthContext.Provider value={{ user, login, logout, isAuthenticated }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => useContext(AuthContext);
```

---

### 2. Appì— Provider ì ìš© (src/App.js)

```jsx
import React from 'react';
import { AuthProvider } from './contexts/AuthContext';
import MainRoutes from './MainRoutes';

function App() {
  return (
    <AuthProvider>
      <MainRoutes />
    </AuthProvider>
  );
}

export default App;
```

---

### 3. ë¡œê·¸ì¸ í›„ ìƒíƒœ ë³€ê²½ (src/pages/Login.js)

```jsx
import React, { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';

const Login = () => {
  const { login } = useAuth();
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleLogin = async () => {
    const res = await axios.post('/login', { email, password });
    login(res.data); // user: { email, token, name, role }
    navigate('/dashboard');
  };

  return (
    <div>
      <h2>ë¡œê·¸ì¸</h2>
      <input value={email} onChange={(e) => setEmail(e.target.value)} />
      <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} />
      <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
    </div>
  );
};

export default Login;
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- ContextëŠ” ì „ì²´ ì•±ì—ì„œ ë¡œê·¸ì¸ ìƒíƒœ ê³µìœ ì— ì í•©
- ë³µì¡í•œ ìƒíƒœ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤ë©´ `useReducer` ë˜ëŠ” Reduxë¡œ í™•ì¥ ê°€ëŠ¥
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ `localStorage`ì—ì„œ userë¥¼ ë³µì›í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
