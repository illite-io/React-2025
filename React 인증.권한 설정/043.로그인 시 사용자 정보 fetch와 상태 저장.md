# 043. ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ì ì •ë³´ fetchì™€ ìƒíƒœ ì €ì¥

ë¡œê·¸ì¸ í›„ ì„œë²„ë¡œë¶€í„° ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­(`GET /me`)í•˜ì—¬  
ì „ì—­ ìƒíƒœì— ì €ì¥(Zustand ë˜ëŠ” Context ë“±)í•˜ê³   
ì•± ì „ì—­ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- ë¡œê·¸ì¸ ì§í›„ ì‚¬ìš©ì ì •ë³´ API í˜¸ì¶œ
- `useAuthStore` ë˜ëŠ” `AuthContext`ì— ì €ì¥
- ìƒíƒœ ì—…ë°ì´íŠ¸ í›„ `isAuthenticated` í”Œë˜ê·¸ true ì„¤ì •

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ë¡œê·¸ì¸ ì²˜ë¦¬ í›„ ì‚¬ìš©ì ì •ë³´ ìš”ì²­ (src/pages/LoginPage.js)

```jsx
import useAuthStore from '../store/useAuthStore';
import axios from 'axios';

const LoginPage = () => {
  const { login } = useAuthStore();

  const handleLogin = async () => {
    // ë¡œê·¸ì¸ ìš”ì²­
    const res = await axios.post('/api/login', {
      email: 'test@example.com',
      password: '1234',
    });

    const token = res.data.token;
    localStorage.setItem('token', token);

    // ì‚¬ìš©ì ì •ë³´ ìš”ì²­
    const me = await axios.get('/api/me', {
      headers: { Authorization: `Bearer ${token}` },
    });

    login(me.data, token); // ìƒíƒœ ì €ì¥
  };

  return <button onClick={handleLogin}>ë¡œê·¸ì¸</button>;
};

export default LoginPage;
```

---

### 2. Zustandì—ì„œ ìƒíƒœ ì €ì¥ (src/store/useAuthStore.js)

```js
const useAuthStore = create((set) => ({
  user: null,
  token: null,
  isAuthenticated: false,

  login: (user, token) =>
    set({ user, token, isAuthenticated: true }),
}));
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- í† í° ë°œê¸‰ â†’ ì‚¬ìš©ì ì •ë³´ ìš”ì²­ â†’ ìƒíƒœ ì €ì¥ ìˆœì„œê°€ ì¼ë°˜ì 
- `/api/me` ëŒ€ì‹  ë¡œê·¸ì¸ ì‘ë‹µì— ì‚¬ìš©ì ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ë©´ ë”°ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ ë¨
- ì•± ì „ì—­ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í•µì‹¬ ë¡œì§
