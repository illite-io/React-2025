# 019. ë¡œê·¸ì¸ ì‹œ ê¶Œí•œ(Role)ì— ë”°ë¼ ë‹¤ë¥¸ í™”ë©´ ë³´ì´ê¸°

ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ `role` ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ **ê´€ë¦¬ì(admin), ì¼ë°˜ ì‚¬ìš©ì(user)** ë“± ê¶Œí•œë³„ë¡œ  
ë‹¤ë¥¸ í™”ë©´ì„ ë³´ì—¬ì£¼ê±°ë‚˜, íŠ¹ì • ì»´í¬ë„ŒíŠ¸ ì ‘ê·¼ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## âœ… ì£¼ìš” í¬ì¸íŠ¸
- ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ì ì •ë³´ì— `role` í¬í•¨
- ì „ì—­ ìƒíƒœì—ì„œ í˜„ì¬ ì‚¬ìš©ì ì—­í•  í™•ì¸
- ì»´í¬ë„ŒíŠ¸ë‚˜ ë¼ìš°íŠ¸ì—ì„œ ì¡°ê±´ë¶€ ë Œë”ë§

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

### 1. ë¡œê·¸ì¸ ì‹œ ì—­í•  ì •ë³´ ì €ì¥

```js
// ì˜ˆ: ë¡œê·¸ì¸ ì‘ë‹µ
{
  user: {
    email: 'admin@example.com',
    name: 'ê´€ë¦¬ì',
    role: 'admin',
  },
  token: 'xxx...',
}
```

```js
// ì „ì—­ ìƒíƒœ (ì˜ˆ: Zustand ë˜ëŠ” Context)
set({ user, role: user.role, isAuthenticated: true });
```

---

### 2. ì—­í• ë³„ í™”ë©´ ë Œë”ë§ (src/pages/Dashboard.js)

```jsx
import useAuthStore from '../store/useAuthStore';

const Dashboard = () => {
  const { user } = useAuthStore();

  if (!user) return null;

  return (
    <div>
      <h2>ëŒ€ì‹œë³´ë“œ</h2>
      {user.role === 'admin' && <p>ê´€ë¦¬ì ë©”ë‰´ í‘œì‹œ</p>}
      {user.role === 'user' && <p>ì¼ë°˜ ì‚¬ìš©ì ë©”ë‰´ í‘œì‹œ</p>}
    </div>
  );
};

export default Dashboard;
```

---

### 3. ê´€ë¦¬ì ì „ìš© ì»´í¬ë„ŒíŠ¸ ë³´í˜¸ (src/components/AdminOnly.js)

```jsx
import { Navigate } from 'react-router-dom';
import useAuthStore from '../store/useAuthStore';

const AdminOnly = ({ children }) => {
  const { user } = useAuthStore();

  if (!user || user.role !== 'admin') {
    return <Navigate to="/no-access" replace />;
  }

  return children;
};

export default AdminOnly;
```

```jsx
// ì‚¬ìš© ì˜ˆì‹œ
<AdminOnly>
  <AdminDashboard />
</AdminOnly>
```

---

## ğŸ“ ì¶”ê°€ ì„¤ëª…
- ë°±ì—”ë“œì—ì„œ ì‚¬ìš©ì ì—­í• (role)ì„ JWT í† í°ì— í¬í•¨í•˜ê±°ë‚˜ ì‘ë‹µì— ëª…ì‹œí•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
- `role === 'admin'` ì¡°ê±´ ì™¸ì—ë„ `includes()`, `ê¶Œí•œ ë°°ì—´` ë°©ì‹ë„ ì‚¬ìš© ê°€ëŠ¥
- ê¶Œí•œì´ ì—†ì„ ê²½ìš° ì ‘ê·¼ ì°¨ë‹¨ í˜ì´ì§€(`/no-access`)ë¡œ ë¦¬ë””ë ‰ì…˜í•˜ëŠ” ê²ƒì´ UXì— ì¢‹ìŒ
