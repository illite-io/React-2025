ì¢‹ì•„ìš”! ì´ë²ˆì—ëŠ” **ë¡œê·¸ì¸ í›„ ì‚¬ìš©ìê°€ ì›ë˜ ê°€ë ¤ë˜ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•**ì„ ì•Œë ¤ë“œë¦´ê²Œìš”.
ì˜ˆë¥¼ ë“¤ì–´ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìê°€ `/admin`ì— ì ‘ê·¼í–ˆì„ ë•Œ,
ë¨¼ì € ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¤ê³  â†’ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ë‹¤ì‹œ `/admin`ìœ¼ë¡œ ë³´ë‚´ì£¼ëŠ” íë¦„ì…ë‹ˆë‹¤.

---

# âœ… ëª©í‘œ

* ì¸ì¦ì´ í•„ìš”í•œ ë¼ìš°íŠ¸ ì ‘ê·¼ ì‹œ â†’ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
* ë¡œê·¸ì¸ ì„±ê³µ í›„ â†’ ì›ë˜ ìš”ì²­í•œ í˜ì´ì§€ë¡œ ì´ë™

---

## âœ… ì‚¬ìš© ê¸°ìˆ 

* `React Router v6`
* `useLocation`, `Navigate`, `useNavigate`

---

## ğŸ“ êµ¬ì„± ì˜ˆì‹œ

```
/src
 â”œâ”€â”€ /routes
 â”‚   â””â”€â”€ PrivateRoute.tsx   â† ë³´í˜¸ëœ ë¼ìš°íŠ¸
 â”œâ”€â”€ /pages
 â”‚   â””â”€â”€ LoginPage.tsx      â† ë¡œê·¸ì¸ ì²˜ë¦¬
 â””â”€â”€ App.tsx
```

---

## âœ… 1. PrivateRouteì—ì„œ `location` ì €ì¥ (ğŸ“„ `/routes/PrivateRoute.tsx`)

```tsx
import { useAuth } from '../hooks/useAuth';
import { Navigate, useLocation } from 'react-router-dom';

type Props = { children: JSX.Element };

const PrivateRoute = ({ children }: Props) => {
  const { isLoggedIn } = useAuth();
  const location = useLocation();

  if (!isLoggedIn) {
    // âœ… í˜„ì¬ ìœ„ì¹˜(location)ë¥¼ stateì— ë‹´ì•„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  return children;
};

export default PrivateRoute;
```

---

## âœ… 2. ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ `location.state.from` í™•ì¸ (ğŸ“„ `/pages/LoginPage.tsx`)

```tsx
import { useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from '../hooks/useAuth';

const LoginPage = () => {
  const { login } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  // âœ… ê¸°ë³¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œëŠ” '/'
  const from = (location.state as any)?.from?.pathname || '/';

  const handleLogin = async () => {
    try {
      await login('admin', '1234');
      navigate(from, { replace: true }); // âœ… ì›ë˜ ìœ„ì¹˜ë¡œ ì´ë™
    } catch (err) {
      alert('ë¡œê·¸ì¸ ì‹¤íŒ¨');
    }
  };

  return (
    <div>
      <h2>ë¡œê·¸ì¸</h2>
      <button onClick={handleLogin}>ë¡œê·¸ì¸</button>
    </div>
  );
};

export default LoginPage;
```

---

## âœ… ë™ì‘ íë¦„

| ë‹¨ê³„                      | ì„¤ëª…                                   |
| ----------------------- | ------------------------------------ |
| 1. ë¹„ë¡œê·¸ì¸ ìƒíƒœë¡œ `/admin` ì ‘ê·¼ | â†’ `/login` ìœ¼ë¡œ ì´ë™í•˜ë©° `from: /admin` ì „ë‹¬ |
| 2. ë¡œê·¸ì¸ ì„±ê³µ               | â†’ `navigate('/admin')` ìœ¼ë¡œ ë³µê·€         |
| 3. ë¡œê·¸ì¸ ì‹¤íŒ¨               | â†’ í˜„ì¬ í˜ì´ì§€ ìœ ì§€, ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ               |

---

## âœ… ì‘ìš©: ê´€ë¦¬ì í˜ì´ì§€ì—ë§Œ ì ìš© (AdminRouteì—ë„ ë™ì¼)

```tsx
<Navigate to="/login" state={{ from: location }} />
```

---

## âœ… ìœ íš¨ì„± ê²€ì¦

```tsx
const from = (location.state as any)?.from?.pathname || '/';
```

ë˜ëŠ” TypeScript ì •ì˜ ì¶”ê°€:

```ts
interface LocationState {
  from: {
    pathname: string;
  };
}
```

---

## ğŸ“Œ ìš”ì•½

| ê¸°ëŠ¥              | êµ¬í˜„ ë°©ì‹                                     |
| --------------- | ----------------------------------------- |
| ì›ë˜ í˜ì´ì§€ ê¸°ì–µ       | `<Navigate state={{ from: location }} />` |
| ë¡œê·¸ì¸ ì„±ê³µ í›„ ë³µê·€     | `navigate(from)` ì‚¬ìš©                       |
| React Router v6 | `useLocation`, `useNavigate`, `state` ì‚¬ìš©  |

---

## ğŸ‘‰ ë‹¤ìŒ ì¶”ì²œ ì£¼ì œ

* âœ… i18n ë‹¤êµ­ì–´ ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬ì„± (`react-i18next`)
* âœ… ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼ ìœ íš¨ì„± ê²€ì‚¬ (`yup`, `react-hook-form`)
* âœ… ë¡œê·¸ì¸ ìœ ì§€ (ë¦¬í”„ë ˆì‹œ ì‹œ í† í°ìœ¼ë¡œ ìë™ ë¡œê·¸ì¸)

ë³´ê³  ì‹¶ì€ ì£¼ì œë¥¼ ë§ì”€í•´ì£¼ì‹œê±°ë‚˜ `"ë‹¤ìŒ"`ì´ë¼ê³  ì…ë ¥í•´ ì£¼ì„¸ìš”!
