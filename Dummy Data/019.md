ì¢‹ì•„ìš”! ì´ë²ˆì—ëŠ” **React Contextë¡œ ë¡œê·¸ì¸ ìƒíƒœ ì „ì—­ ê´€ë¦¬**í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´ë“œë¦´ê²Œìš”.
React Contextë¥¼ í™œìš©í•˜ë©´ ë¡œê·¸ì¸ ì—¬ë¶€, ì‚¬ìš©ì ì •ë³´, ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜ ë“±ì„ ì „ì—­ì—ì„œ ê³µìœ í•  ìˆ˜ ìˆì–´ ê´€ë¦¬ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤.

---

# âœ… ëª©í‘œ

* Contextë¡œ `user`, `isLoggedIn`, `login()`, `logout()` ì „ì—­ ê´€ë¦¬
* ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œë“  ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ê¸°

---

## ğŸ“ í´ë” êµ¬ì¡° ì˜ˆì‹œ

```
/src
 â”œâ”€â”€ /contexts
 â”‚   â””â”€â”€ AuthContext.tsx     â† ì¸ì¦ ìƒíƒœ ê´€ë¦¬ Context
 â”œâ”€â”€ /pages
 â”‚   â””â”€â”€ LoginPage.tsx
 â”œâ”€â”€ /components
 â”‚   â””â”€â”€ LogoutButton.tsx
 â””â”€â”€ App.tsx
```

---

## âœ… 1. AuthContext ì •ì˜ (ğŸ“„ `/src/contexts/AuthContext.tsx`)

```tsx
import React, { createContext, useContext, useState, useEffect } from 'react';

type User = {
  id: number;
  name: string;
  email: string;
};

type AuthContextType = {
  user: User | null;
  isLoggedIn: boolean;
  login: (user: User, token: string) => void;
  logout: () => void;
};

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: React.ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);

  useEffect(() => {
    const saved = localStorage.getItem('user');
    if (saved) setUser(JSON.parse(saved));
  }, []);

  const login = (userData: User, token: string) => {
    localStorage.setItem('token', token);
    localStorage.setItem('user', JSON.stringify(userData));
    setUser(userData);
  };

  const logout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setUser(null);
  };

  return (
    <AuthContext.Provider
      value={{ user, isLoggedIn: !!user, login, logout }}
    >
      {children}
    </AuthContext.Provider>
  );
};

// âœ… Context í›…
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) throw new Error('useAuthëŠ” AuthProvider ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.');
  return context;
};
```

---

## âœ… 2. App.tsxì—ì„œ Provider ì ìš©

```tsx
import { BrowserRouter } from 'react-router-dom';
import { AuthProvider } from './contexts/AuthContext';

function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
        {/* ë¼ìš°íŠ¸ ë° ì»´í¬ë„ŒíŠ¸ */}
      </AuthProvider>
    </BrowserRouter>
  );
}
```

---

## âœ… 3. ë¡œê·¸ì¸ ì²˜ë¦¬ (ğŸ“„ `/pages/LoginPage.tsx`)

```tsx
import { useAuth } from '../contexts/AuthContext';
import { login as loginApi } from '../api/auth';

const LoginPage = () => {
  const { login } = useAuth();

  const handleLogin = async () => {
    const result = await loginApi('hong', '1234');
    login(result.user, result.token); // Contextì— ë¡œê·¸ì¸ ì •ë³´ ì €ì¥
  };

  return <button onClick={handleLogin}>ë¡œê·¸ì¸</button>;
};
```

---

## âœ… 4. ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ (ğŸ“„ `/components/LogoutButton.tsx`)

```tsx
import { useAuth } from '../contexts/AuthContext';

const LogoutButton = () => {
  const { logout } = useAuth();
  return <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>;
};
```

---

## âœ… 5. ì¡°ê±´ë¶€ ë Œë”ë§ ì˜ˆì‹œ

```tsx
import { useAuth } from '../contexts/AuthContext';

const Header = () => {
  const { isLoggedIn, user } = useAuth();

  return (
    <header>
      {isLoggedIn ? (
        <p>{user?.name} ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</p>
      ) : (
        <a href="/login">ë¡œê·¸ì¸</a>
      )}
    </header>
  );
};
```

---

## ğŸ“Œ ìš”ì•½

| í•­ëª©      | ì„¤ëª…                                          |
| ------- | ------------------------------------------- |
| ì „ì—­ ìƒíƒœ   | `user`, `isLoggedIn`, `login()`, `logout()` |
| ë³´ê´€      | `localStorage`ì— ì‚¬ìš©ì/í† í° ì €ì¥                   |
| ìë™ ë¡œê·¸ì¸  | `useEffect`ë¡œ ì´ˆê¸° ìƒíƒœ ë³µì›                       |
| ì–´ë””ì„œë“  ì‚¬ìš© | `useAuth()` ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥                   |

---

## ğŸ‘‰ ë‹¤ìŒ ì£¼ì œ ì¶”ì²œ

* âœ… React Queryì™€ í•¨ê»˜ ë¡œê·¸ì¸ ìƒíƒœ ë™ê¸°í™”
* âœ… ë¡œê·¸ì¸ í›„ useQueryë¡œ ì‚¬ìš©ì ì •ë³´ ìë™ ë¶ˆëŸ¬ì˜¤ê¸°
* âœ… React Query ìºì‹œ ì´ˆê¸°í™”(logout ì‹œ) ë° invalidate ì‚¬ìš©ë²•

ë³´ì‹œë ¤ë©´ `"ë‹¤ìŒ"`ì´ë¼ê³  ì…ë ¥í•´ì£¼ì„¸ìš”!
