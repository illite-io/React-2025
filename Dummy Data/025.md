ì¢‹ì•„ìš”! ì´ë²ˆì—ëŠ” **ê´€ë¦¬ì ê¶Œí•œ(role)ì— ë”°ë¥¸ ì ‘ê·¼ ì œí•œ êµ¬í˜„ ë°©ë²•**ì„ ì•Œë ¤ë“œë¦´ê²Œìš”.

ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ `role` ì •ë³´(ì˜ˆ: `admin`, `user`)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ
íŠ¹ì • í˜ì´ì§€ ë˜ëŠ” ê¸°ëŠ¥ì„ **ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë³´í˜¸**í•˜ëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

---

# âœ… ëª©í‘œ

* ë¡œê·¸ì¸ ì‘ë‹µì—ì„œ `user.role` ì •ë³´ë¥¼ ë°›ìŒ
* ê´€ë¦¬ì í˜ì´ì§€ì— `admin`ë§Œ ì ‘ê·¼ ê°€ëŠ¥
* ì¼ë°˜ ì‚¬ìš©ìëŠ” ì ‘ê·¼ ì‹œ ì°¨ë‹¨ ë˜ëŠ” ë¦¬ë””ë ‰ì…˜

---

## âœ… 1. ë¡œê·¸ì¸ ì‘ë‹µì— `role` í¬í•¨ (ğŸ“„ `/db.json` ì˜ˆì‹œ)

```json
{
  "users": [
    {
      "id": 1,
      "username": "admin",
      "password": "1234",
      "name": "ê´€ë¦¬ì",
      "email": "admin@example.com",
      "role": "admin"
    },
    {
      "id": 2,
      "username": "user",
      "password": "5678",
      "name": "ì¼ë°˜ì¸",
      "email": "user@example.com",
      "role": "user"
    }
  ]
}
```

âœ… ë¡œê·¸ì¸ ì‹œ user ê°ì²´ì— `role` í¬í•¨ë˜ë„ë¡ ì²˜ë¦¬

---

## âœ… 2. ë¡œê·¸ì¸ API ì‘ë‹µ (ğŸ“„ `/api/auth.ts`)

```ts
// ë¡œê·¸ì¸ ì„±ê³µ ì‹œ user ê°ì²´ ì•ˆì— role í¬í•¨
{
  "token": "fake-jwt-token",
  "user": {
    "id": 1,
    "name": "ê´€ë¦¬ì",
    "email": "admin@example.com",
    "role": "admin"
  }
}
```

---

## âœ… 3. useAuth í›…ì—ì„œ role í¬í•¨ (ğŸ“„ `/hooks/useAuth.ts`)

```ts
export const useAuth = () => {
  const user = useQuery(['user'], fetchUser, { ... }).data;
  const isAdmin = user?.role === 'admin';

  return {
    user,
    isAdmin,
    isLoggedIn: !!user,
    login,
    logout,
  };
};
```

---

## âœ… 4. ê´€ë¦¬ì ì „ìš© ë¼ìš°íŠ¸ êµ¬ì„± (ğŸ“„ `/routes/AdminRoute.tsx`)

```tsx
import { Navigate } from 'react-router-dom';
import { useAuth } from '../hooks/useAuth';

type Props = {
  children: JSX.Element;
};

const AdminRoute = ({ children }: Props) => {
  const { isLoggedIn, isAdmin } = useAuth();

  if (!isLoggedIn) return <Navigate to="/login" />;
  if (!isAdmin) return <Navigate to="/403" />;

  return children;
};

export default AdminRoute;
```

---

## âœ… 5. ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ ë¼ìš°íŒ… (ğŸ“„ `/App.tsx`)

```tsx
<Route
  path="/admin"
  element={
    <AdminRoute>
      <AdminDashboard />
    </AdminRoute>
  }
/>
<Route path="/403" element={<p>âŒ ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</p>} />
```

---

## âœ… 6. ê´€ë¦¬ì UI ì¡°ê±´ë¶€ ë Œë”ë§

```tsx
const { isAdmin } = useAuth();

{isAdmin && <button>ê´€ë¦¬ì ì„¤ì •</button>}
```

---

## âœ… ê²°ê³¼ ì •ë¦¬

| ì—­í•       | ê²°ê³¼                           |
| ------- | ---------------------------- |
| `admin` | `/admin` ì ‘ê·¼ ê°€ëŠ¥               |
| `user`  | `/admin` ì ‘ê·¼ ì‹œ `/403` í˜ì´ì§€ë¡œ ì´ë™ |
| ë¹„ë¡œê·¸ì¸    | `/admin` ì ‘ê·¼ ì‹œ `/login`ìœ¼ë¡œ ì´ë™  |

---

## ğŸ“Œ ìš”ì•½

| í•­ëª©       | ì„¤ëª…                                           |
| -------- | -------------------------------------------- |
| ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ | `user.role`ë¡œ êµ¬ë¶„ (`admin`, `user`, `guest` ë“±) |
| ë¼ìš°íŠ¸ ë³´í˜¸   | `AdminRoute` ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬                        |
| UI ì œì–´    | `isAdmin &&` ì¡°ê±´ë¶€ ë Œë”ë§ ì‚¬ìš© ê°€ëŠ¥                   |

---

## ğŸ‘‰ ë‹¤ìŒ ì¶”ì²œ ì£¼ì œ

* âœ… ë¡œê·¸ì¸ í›„ ì›ë˜ ê°€ë ¤ë˜ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ ì²˜ë¦¬ (`from` í™œìš©)
* âœ… ë¡œê·¸ì¸ ì—ëŸ¬, í•„ë“œ ìœ íš¨ì„± ê²€ì¦ ê³ ê¸‰ UX ê°œì„ 
* âœ… i18n ë‹¤êµ­ì–´ ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„

ë³´ê³  ì‹¶ì€ í•­ëª©ì„ ì•Œë ¤ì£¼ì‹œê±°ë‚˜ `"ë‹¤ìŒ"`ì´ë¼ê³  ì…ë ¥í•´ì£¼ì„¸ìš”!
