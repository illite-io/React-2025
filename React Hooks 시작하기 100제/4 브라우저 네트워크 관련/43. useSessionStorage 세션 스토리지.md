좋습니다.
그럼 **React Hooks 시작하기 100제 – 43번 `useMediaQuery` (미디어쿼리 상태 감지)** 예제로 넘어가겠습니다.

---

## 43. `useMediaQuery` – 미디어쿼리 상태 감지

### 목적

* CSS 미디어쿼리(예: `(min-width: 768px)`) 일치 여부를 **React 상태**로 다룸
* 반응형 레이아웃, 조건부 렌더링, 성능 최적화에 활용

---

### 파일 경로: `src/hooks/useMediaQuery.js`

```javascript
import { useEffect, useState } from 'react';

/**
 * useMediaQuery
 * @param {string} query CSS Media Query 문자열 (예: '(min-width: 768px)')
 * @returns {boolean} 미디어쿼리 일치 여부
 */
export default function useMediaQuery(query) {
  const getMatches = () => {
    if (typeof window === 'undefined' || !window.matchMedia) return false;
    return window.matchMedia(query).matches;
  };

  const [matches, setMatches] = useState(getMatches);

  useEffect(() => {
    if (typeof window === 'undefined' || !window.matchMedia) return;

    const mql = window.matchMedia(query);
    const listener = (e) => setMatches(e.matches);

    // 최신 브라우저
    if (mql.addEventListener) mql.addEventListener('change', listener);
    else mql.addListener(listener); // 구형 브라우저 대응

    // 초기 동기화
    setMatches(mql.matches);

    return () => {
      if (mql.removeEventListener) mql.removeEventListener('change', listener);
      else mql.removeListener(listener);
    };
  }, [query]);

  return matches;
}
```

---

### 사용 예시 – 반응형 레이아웃 전환

**파일 경로:** `src/App.js`

```javascript
import React from 'react';
import useMediaQuery from './hooks/useMediaQuery';

export default function App() {
  // 브레이크포인트: 768px 이상일 때 데스크톱 레이아웃
  const isDesktop = useMediaQuery('(min-width: 768px)');

  const container = {
    padding: 20,
    minHeight: '100vh',
    background: '#f8fafc'
  };

  const grid = {
    display: 'grid',
    gap: 12,
    gridTemplateColumns: isDesktop ? '1fr 1fr 1fr' : '1fr'
  };

  const card = {
    background: '#fff',
    border: '1px solid #e5e7eb',
    borderRadius: 10,
    padding: 16
  };

  return (
    <div style={container}>
      <h1>useMediaQuery – 미디어쿼리 상태 감지</h1>
      <p>현재 레이아웃: <strong>{isDesktop ? '데스크톱(≥768px)' : '모바일(<768px)'}</strong></p>

      <div style={grid}>
        <div style={card}>카드 1</div>
        <div style={card}>카드 2</div>
        <div style={card}>카드 3</div>
      </div>
    </div>
  );
}
```

---

### 추가 패턴: 여러 쿼리 동시 사용

**파일 경로:** `src/components/Header.js`

```javascript
import React from 'react';
import useMediaQuery from '../hooks/useMediaQuery';

export default function Header() {
  const isTabletUp = useMediaQuery('(min-width: 640px)');
  const isDesktopUp = useMediaQuery('(min-width: 1024px)');

  return (
    <header
      style={{
        padding: 16,
        background: '#111827',
        color: '#f9fafb',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between'
      }}
    >
      <strong>MyApp</strong>
      {isTabletUp && <nav>메뉴 · 검색</nav>}
      {isDesktopUp && <div>프로필 · 알림</div>}
    </header>
  );
}
```

---

### 핵심 포인트

* `matchMedia(query).matches`를 상태로 노출 → JS 로직에서 브레이크포인트 제어
* 이벤트 리스너로 **실시간 반응**
* SSR 환경에서는 `window`가 없으므로 기본값/가드 처리 필요
* 복잡한 반응형은 `useMediaQuery`로 조건을 계산한 뒤, 스타일/렌더링을 분기

---

다음은 **44번 `usePagination` – 페이지네이션 상태 관리** 예제로 이어가겠습니다. 계속 진행할까요?
