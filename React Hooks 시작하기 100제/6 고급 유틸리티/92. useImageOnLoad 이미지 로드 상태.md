좋습니다.
그럼 **React Hooks 시작하기 100제 – 92번 `useMediaQuery` (반응형 미디어쿼리 상태 감지)** 예제로 넘어가겠습니다.

---

## 92. `useMediaQuery` – 반응형 미디어쿼리 감지

### 목적

* JS에서 CSS 미디어쿼리의 일치 여부를 **실시간 상태**로 사용
* 반응형 레이아웃, 다크모드, 프린트 전용 UI 분기 등에 활용

---

### 파일 경로: `src/hooks/useMediaQuery.js`

```javascript
import { useEffect, useState } from 'react';

/**
 * useMediaQuery
 * @param {string} query - '(min-width: 768px)' 처럼 괄호 포함 형태
 * @returns {boolean} - 미디어쿼리 일치 여부
 */
export default function useMediaQuery(query) {
  const getMatch = () => {
    if (typeof window === 'undefined' || !window.matchMedia) return false;
    return window.matchMedia(query).matches;
  };

  const [matches, setMatches] = useState(getMatch);

  useEffect(() => {
    if (typeof window === 'undefined' || !window.matchMedia) return;
    const mql = window.matchMedia(query);

    // 초기 동기화
    setMatches(mql.matches);

    // 변경 감지
    const handler = (e) => setMatches(e.matches);
    if (mql.addEventListener) mql.addEventListener('change', handler);
    else mql.addListener(handler); // Safari 구버전

    return () => {
      if (mql.removeEventListener) mql.removeEventListener('change', handler);
      else mql.removeListener(handler);
    };
  }, [query]);

  return matches;
}
```

---

### 사용 예시 1 – 브레이크포인트로 레이아웃 전환

**파일 경로:** `src/App.js`

```javascript
import React from 'react';
import useMediaQuery from './hooks/useMediaQuery';

export default function App() {
  const isMdUp = useMediaQuery('(min-width: 768px)');
  const isLgUp = useMediaQuery('(min-width: 1024px)');

  return (
    <div style={{ padding: 24 }}>
      <h1>useMediaQuery – 반응형 감지</h1>
      <p>현재: {isLgUp ? '≥1024px' : isMdUp ? '≥768px' : '<768px'}</p>

      <div
        style={{
          display: 'grid',
          gap: 12,
          gridTemplateColumns: isLgUp ? 'repeat(3, 1fr)' : isMdUp ? 'repeat(2, 1fr)' : '1fr',
        }}
      >
        {[...Array(6)].map((_, i) => (
          <div key={i} style={{ padding: 16, background: '#f1f5f9', borderRadius: 8 }}>
            카드 {i + 1}
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

### 사용 예시 2 – 다크모드 자동 감지(`prefers-color-scheme`)

```javascript
import React from 'react';
import useMediaQuery from './hooks/useMediaQuery';

export default function ThemeBox() {
  const prefersDark = useMediaQuery('(prefers-color-scheme: dark)');

  const boxStyle = {
    marginTop: 16,
    padding: 16,
    borderRadius: 8,
    background: prefersDark ? '#0f172a' : '#ffffff',
    color: prefersDark ? '#e2e8f0' : '#0f172a',
    border: '1px solid #e5e7eb',
  };

  return (
    <div style={boxStyle}>
      시스템 테마: {prefersDark ? '다크' : '라이트'}
    </div>
  );
}
```

---

### 고급: 여러 쿼리를 한 번에

**파일 경로:** `src/hooks/useMediaQueries.js`

```javascript
import useMediaQuery from './useMediaQuery';

/**
 * 여러 미디어쿼리를 한 번에 평가해 객체로 반환
 * @param {Record<string,string>} map - { key: query }
 * @returns {Record<string,boolean>}
 */
export function useMediaQueries(map) {
  const entries = Object.entries(map);
  const results = Object.fromEntries(
    entries.map(([k, q]) => [k, useMediaQuery(q)])
  );
  return results;
}
```

사용:

```javascript
const mq = useMediaQueries({
  md: '(min-width: 768px)',
  lg: '(min-width: 1024px)',
  dark: '(prefers-color-scheme: dark)',
});
// mq.md, mq.lg, mq.dark 사용
```

---

### 구현 포인트

* SSR 환경에서는 `window.matchMedia`가 없으므로 **보수적 기본값(false)** 처리
* Safari 구버전 호환을 위해 `addListener/removeListener` 폴백 포함
* 쿼리 문자열은 **괄호 포함** 형태로 넘겨야 함: `'(min-width: 768px)'`
* 다크모드, 감축 모션(`prefers-reduced-motion`), 프린트(`print`) 등 다양한 쿼리와 조합 가능

---

다음은 **93번 `usePrefersColorScheme` – 시스템 다크/라이트 테마 동기화** 예제로 이어가겠습니다. 계속 진행할까요?
