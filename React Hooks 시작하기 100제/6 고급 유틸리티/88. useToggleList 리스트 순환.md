좋습니다.
그럼 **React Hooks 시작하기 100제 – 88번 `useSessionStorageState` (세션 스토리지 동기화)** 예제로 넘어가겠습니다.

---

## 88. `useSessionStorageState` – 세션 스토리지 동기화

### 목적

* 상태 값을 `sessionStorage`에 저장하고 복원
* **브라우저 세션(탭)** 이 유지되는 동안만 데이터 보존
* 새로고침해도 유지되지만, 탭을 닫으면 사라짐

---

### 파일 경로: `src/hooks/useSessionStorageState.js`

```javascript
import { useCallback, useEffect, useRef, useState } from 'react';

/**
 * useSessionStorageState
 * @param {string} key 세션스토리지 키
 * @param {any|(()=>any)} initial 초기값
 * @param {(v:any)=>string} serialize 값→문자열 (기본 JSON.stringify)
 * @param {(s:string)=>any} deserialize 문자열→값 (기본 JSON.parse)
 *
 * 반환: [state, setState, reset]
 */
export default function useSessionStorageState(
  key,
  initial,
  serialize = JSON.stringify,
  deserialize = JSON.parse
) {
  const isBrowser = typeof window !== 'undefined' && typeof sessionStorage !== 'undefined';
  const keyRef = useRef(key);

  const read = useCallback(() => {
    if (!isBrowser) return typeof initial === 'function' ? initial() : initial;
    try {
      const raw = sessionStorage.getItem(keyRef.current);
      if (raw === null) {
        return typeof initial === 'function' ? initial() : initial;
      }
      return deserialize(raw);
    } catch {
      return typeof initial === 'function' ? initial() : initial;
    }
  }, [isBrowser, initial, deserialize]);

  const [state, setState] = useState(read);

  // key 변경 대응
  useEffect(() => {
    if (keyRef.current === key) return;
    try {
      const prevKey = keyRef.current;
      const prev = sessionStorage.getItem(prevKey);
      if (prev !== null) {
        sessionStorage.removeItem(prevKey);
        sessionStorage.setItem(key, prev);
      }
    } catch {}
    keyRef.current = key;
  }, [key]);

  // state → sessionStorage 반영
  useEffect(() => {
    if (!isBrowser) return;
    try {
      sessionStorage.setItem(keyRef.current, serialize(state));
    } catch {}
  }, [state, serialize, isBrowser]);

  const reset = useCallback(() => {
    const v = typeof initial === 'function' ? initial() : initial;
    setState(v);
    try {
      if (isBrowser) sessionStorage.setItem(keyRef.current, serialize(v));
    } catch {}
  }, [initial, serialize, isBrowser]);

  return [state, setState, reset];
}
```

---

### 사용 예시

**파일 경로:** `src/App.js`

```javascript
import React from 'react';
import useSessionStorageState from './hooks/useSessionStorageState';

export default function App() {
  const [keyword, setKeyword, resetKeyword] = useSessionStorageState('search:keyword', '');
  const [count, setCount] = useSessionStorageState('counter:value', 0);

  return (
    <div style={{ padding: 24 }}>
      <h1>useSessionStorageState – 세션 스토리지 동기화</h1>

      <label>
        검색어:
        <input
          value={keyword}
          onChange={(e) => setKeyword(e.target.value)}
          style={{ marginLeft: 8 }}
        />
      </label>
      <button onClick={resetKeyword} style={{ marginLeft: 8 }}>초기화</button>

      <div style={{ marginTop: 12 }}>
        카운트: {count}
        <button onClick={() => setCount(count + 1)} style={{ marginLeft: 8 }}>+</button>
        <button onClick={() => setCount(count - 1)}>-</button>
      </div>

      <p style={{ marginTop: 12, color: '#475569' }}>
        새로고침해도 유지되지만, 탭을 닫으면 값이 사라집니다.
      </p>
    </div>
  );
}
```

---

### 구현 포인트

* `localStorage`와 달리 브라우저 세션(탭) 종료 시 데이터 삭제
* 동일한 탭 내에서는 새로고침해도 값 유지
* JSON 외 포맷 지원 위해 `serialize/deserialize` 주입 가능
* 로그인 세션, 임시 폼 데이터, 검색 키워드 등 사용 사례 다양

---

다음은 **89번 `usePreferredLanguage` – 브라우저 기본 언어 감지** 예제로 넘어가겠습니다.
진행할까요?
