좋습니다.
그럼 **React Hooks 시작하기 100제 – 39번 `useScrollPosition` (스크롤 위치 추적)** 예제로 넘어가겠습니다.

---

## 39. `useScrollPosition` – 스크롤 위치 추적

### 목적

* 윈도우(또는 특정 컨테이너) 스크롤 좌표(`scrollX`, `scrollY`)를 추적
* 헤더 축소, 상단 이동 버튼 노출, 무한 스크롤 트리거 등에 활용

---

### 파일 경로: `src/hooks/useScrollPosition.js`

```javascript
import { useEffect, useState } from 'react';

/**
 * useScrollPosition
 * @param {HTMLElement | Window} target 스크롤 타겟 (기본: window)
 * @returns {{ x: number, y: number }}
 */
export default function useScrollPosition(target = typeof window !== 'undefined' ? window : undefined) {
  const getXY = () => {
    if (target && target !== window) {
      return {
        x: target.scrollLeft ?? 0,
        y: target.scrollTop ?? 0,
      };
    }
    // window 기준
    return {
      x: window.scrollX || window.pageXOffset || 0,
      y: window.scrollY || window.pageYOffset || 0,
    };
  };

  const [pos, setPos] = useState(getXY);

  useEffect(() => {
    if (!target) return;

    const handleScroll = () => {
      setPos(getXY());
    };

    // 패시브 리스너: 스크롤 성능에 유리
    const opts = { passive: true };
    if (target === window) {
      window.addEventListener('scroll', handleScroll, opts);
    } else {
      target.addEventListener('scroll', handleScroll, opts);
    }

    // 초기 1회 반영
    handleScroll();

    return () => {
      if (target === window) {
        window.removeEventListener('scroll', handleScroll, opts);
      } else {
        target.removeEventListener('scroll', handleScroll, opts);
      }
    };
    // target이 바뀌면 재바인딩
  }, [target]);

  return pos; // { x, y }
}
```

---

### 사용 예시(윈도우 스크롤)

**파일 경로:** `src/App.js`

```javascript
import React, { useMemo } from 'react';
import useScrollPosition from './hooks/useScrollPosition';

export default function App() {
  const { x, y } = useScrollPosition();

  const showGoTop = useMemo(() => y > 200, [y]);

  const goTop = () => window.scrollTo({ top: 0, behavior: 'smooth' });

  return (
    <div style={{ padding: 24, minHeight: '200vh' }}>
      <h1>useScrollPosition – 스크롤 위치 추적</h1>
      <p>스크롤 X: {x}px, Y: {y}px</p>

      {showGoTop && (
        <button
          onClick={goTop}
          style={{
            position: 'fixed',
            right: 24,
            bottom: 24,
            padding: '10px 14px',
            borderRadius: 8,
            border: '1px solid #e5e7eb',
            background: '#fff',
            boxShadow: '0 8px 24px rgba(0,0,0,0.12)',
            cursor: 'pointer',
          }}
        >
          맨 위로
        </button>
      )}
    </div>
  );
}
```

---

### 사용 예시(특정 스크롤 컨테이너)

**파일 경로:** `src/ScrollableBox.js`

```javascript
import React, { useRef } from 'react';
import useScrollPosition from './hooks/useScrollPosition';

export default function ScrollableBox() {
  const boxRef = useRef(null);
  const { y } = useScrollPosition(boxRef.current);

  return (
    <div>
      <h2>컨테이너 스크롤 Y: {y}px</h2>
      <div
        ref={boxRef}
        style={{
          height: 200,
          overflowY: 'auto',
          border: '1px solid #ddd',
          borderRadius: 8,
          padding: 12,
        }}
      >
        <div style={{ height: 800 }}>
          내부 컨텐츠 (스크롤해 보세요)
        </div>
      </div>
    </div>
  );
}
```

---

### 핵심 포인트

* 패시브 이벤트 리스너(`{ passive: true }`)로 스크롤 성능 개선
* 윈도우와 특정 엘리먼트 모두 지원 (타겟 교체 시 이벤트 재바인딩)
* 무한 스크롤, 헤더 축소, Back-to-Top 버튼, 파랄랙스 효과 등에 바로 응용 가능

---

다음은 **40번 `useOnlineStatus` – 온라인/오프라인 상태 감지** 예제로 이어가겠습니다. 계속 진행할까요?
