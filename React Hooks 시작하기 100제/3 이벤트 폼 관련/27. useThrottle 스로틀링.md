좋습니다.
그럼 **React Hooks 시작하기 100제 – 27번 `useSyncExternalStore` (외부 스토어 구독)** 예제로 넘어가겠습니다.

---

## 27. `useSyncExternalStore` – 외부 스토어 구독

### 목적

* React 18에서 추가된 Hook
* **외부 상태 관리 스토어**(예: Redux, Zustand, 이벤트 기반 스토어)와 동기화
* 서버 렌더링(SSR) 환경에서도 안정적인 상태 구독 보장

---

### 파일 경로: `src/App.js`

```javascript
import React, { useState, useSyncExternalStore } from 'react';

// 간단한 외부 스토어 예제
function createStore(initialValue) {
  let value = initialValue;
  const listeners = new Set();

  return {
    getSnapshot: () => value, // 현재 값 반환
    subscribe: (listener) => {
      listeners.add(listener);
      return () => listeners.delete(listener); // 구독 해제
    },
    setValue: (newValue) => {
      value = newValue;
      listeners.forEach((listener) => listener()); // 모든 구독자 알림
    }
  };
}

// 스토어 인스턴스 생성
const counterStore = createStore(0);

export default function App() {
  // 외부 스토어의 값 구독
  const count = useSyncExternalStore(
    counterStore.subscribe,
    counterStore.getSnapshot
  );

  const [step, setStep] = useState(1);

  const increment = () => counterStore.setValue(count + step);
  const decrement = () => counterStore.setValue(count - step);

  return (
    <div style={{ padding: 20 }}>
      <h1>useSyncExternalStore – 외부 스토어 구독</h1>
      <p>현재 카운트: {count}</p>

      <div>
        <label>증가/감소 단위: </label>
        <input
          type="number"
          value={step}
          onChange={(e) => setStep(Number(e.target.value))}
        />
      </div>

      <button onClick={increment}>+{step}</button>
      <button onClick={decrement} style={{ marginLeft: 10 }}>
        -{step}
      </button>
    </div>
  );
}
```

---

### 코드 설명

1. **스토어 구조**

   * `getSnapshot()` → 현재 상태 반환
   * `subscribe(listener)` → 상태 변경 시 실행할 함수 등록
   * `setValue()` → 상태 변경 및 구독자 알림

2. **`useSyncExternalStore`**

   ```javascript
   const value = useSyncExternalStore(subscribe, getSnapshot);
   ```

   * `subscribe`: 상태 변경 시 알림을 받을 함수
   * `getSnapshot`: 현재 상태 가져오기

3. **SSR 호환성**

   * 클라이언트/서버 렌더링 모두에서 동작
   * 외부 상태 관리 라이브러리(예: Redux)와 공식적으로 호환됨

4. **활용 예**

   * 전역 이벤트 기반 데이터 (WebSocket, BroadcastChannel)
   * 브라우저 API 상태 (네트워크, 배터리, 화면 크기)
   * 커스텀 상태 관리 라이브러리

---

다음은 **28번 `useInsertionEffect` – 스타일 삽입 타이밍 제어** 예제로 넘어가겠습니다.
바로 이어서 진행할까요?
