좋습니다.
그럼 **React Hooks 시작하기 100제 – 37번 `useOnClickOutside` (바깥 클릭 감지)** 예제로 넘어가겠습니다.

---

## 37. `useOnClickOutside` – 바깥 클릭 감지

### 목적

* 모달/드롭다운/툴팁 등 **컴포넌트 바깥을 클릭했을 때 닫기** 동작을 구현

---

### 파일 경로: `src/hooks/useOnClickOutside.js`

```javascript
import { useEffect } from 'react';

/**
 * useOnClickOutside
 * @param {React.RefObject<HTMLElement>} ref 감지 대상 요소의 ref
 * @param {(event: MouseEvent | TouchEvent) => void} handler 바깥 클릭 시 호출
 * @param {('mousedown'|'mouseup'|'click')[]} events 바인딩할 이벤트 목록 (옵션)
 */
export default function useOnClickOutside(ref, handler, events = ['mousedown', 'touchstart']) {
  useEffect(() => {
    const listener = (event) => {
      const el = ref?.current;
      // ref가 없거나, 클릭 대상이 요소 내부면 무시
      if (!el || el.contains(event.target)) return;
      handler(event);
    };

    events.forEach((evt) => document.addEventListener(evt, listener, true));
    return () => {
      events.forEach((evt) => document.removeEventListener(evt, listener, true));
    };
  }, [ref, handler, events]);
}
```

---

### 사용 예시

**파일 경로:** `src/App.js`

```javascript
import React, { useRef, useState, useCallback } from 'react';
import useOnClickOutside from './hooks/useOnClickOutside';

export default function App() {
  const [open, setOpen] = useState(false);
  const popoverRef = useRef(null);

  const close = useCallback(() => setOpen(false), []);
  useOnClickOutside(popoverRef, close); // 바깥 클릭 시 닫기

  return (
    <div style={{ padding: 24 }}>
      <h1>useOnClickOutside – 바깥 클릭 감지</h1>

      <button onClick={() => setOpen((v) => !v)}>
        {open ? '닫기' : '열기'}
      </button>

      {open && (
        <div
          ref={popoverRef}
          style={{
            marginTop: 12,
            width: 260,
            padding: 16,
            background: '#fff',
            border: '1px solid #e5e7eb',
            borderRadius: 8,
            boxShadow: '0 8px 24px rgba(0,0,0,0.12)',
            position: 'relative',
          }}
        >
          <strong>팝오버</strong>
          <p style={{ marginTop: 8, lineHeight: 1.5 }}>
            이 영역 밖을 클릭하면 닫힙니다.
          </p>
        </div>
      )}
    </div>
  );
}
```

---

### 코드 설명

1. **캡처 단계 바인딩**

   * `addEventListener(evt, listener, true)`로 캡처 단계에서 감지해
     내부 요소가 `stopPropagation`을 호출해도 놓치지 않도록 함.

2. **안전한 내부 클릭 판별**

   * `el.contains(event.target)`이면 내부 클릭으로 간주하고 무시.

3. **터치 지원**

   * 기본 이벤트 배열에 `'touchstart'` 포함 → 모바일 환경 대응.

4. **활용 예**

   * 모달, 드롭다운 메뉴, 컨텍스트 메뉴, 날짜 선택기 등.

---

다음은 **38번 `useWindowSize` – 창 크기 추적** 예제로 이어가겠습니다.
계속 진행할까요?
