좋습니다.
그럼 **React Hooks 시작하기 100제 – 80번 `usePortal` (포털을 이용한 컴포넌트 마운트)** 예제로 넘어가겠습니다.

---

## 80. `usePortal` – 포털 마운트 훅

### 목적

* `ReactDOM.createPortal`을 사용하기 위한 **DOM 컨테이너 자동 생성**
* 모달, 드롭다운, 툴팁 등을 루트 외부에 렌더링
* 마운트/언마운트 시 자동 정리

---

### 파일 경로: `src/hooks/usePortal.js`

```javascript
import { useEffect, useRef } from 'react';

/**
 * usePortal
 * @param {string} id - 생성할 DOM 컨테이너 id
 * @returns {HTMLElement} - 포털 대상 DOM 요소
 */
export default function usePortal(id) {
  const rootElemRef = useRef(document.createElement('div'));

  useEffect(() => {
    const existingParent = document.querySelector(`#${id}`);
    const parentElem = existingParent || createRootElem(id);

    parentElem.appendChild(rootElemRef.current);

    return () => {
      rootElemRef.current.remove();
      if (!parentElem.childElementCount) {
        parentElem.remove();
      }
    };
  }, [id]);

  return rootElemRef.current;
}

function createRootElem(id) {
  const rootElem = document.createElement('div');
  rootElem.setAttribute('id', id);
  document.body.appendChild(rootElem);
  return rootElem;
}
```

---

### 사용 예시 – 모달 만들기

**파일 경로:** `src/Modal.js`

```javascript
import ReactDOM from 'react-dom';
import usePortal from './hooks/usePortal';

export default function Modal({ children }) {
  const target = usePortal('modal-root');

  return ReactDOM.createPortal(
    <div style={{
      position: 'fixed', top: 0, left: 0,
      width: '100vw', height: '100vh',
      background: 'rgba(0,0,0,0.5)',
      display: 'flex', alignItems: 'center', justifyContent: 'center'
    }}>
      <div style={{ background: '#fff', padding: 20, borderRadius: 8 }}>
        {children}
      </div>
    </div>,
    target
  );
}
```

---

### 사용 예시 – 앱에서 호출

**파일 경로:** `src/App.js`

```javascript
import React, { useState } from 'react';
import Modal from './Modal';

export default function App() {
  const [open, setOpen] = useState(false);

  return (
    <div style={{ padding: 24 }}>
      <h1>usePortal – 모달 예제</h1>
      <button onClick={() => setOpen(true)}>모달 열기</button>

      {open && (
        <Modal>
          <h2>포털로 렌더링된 모달</h2>
          <button onClick={() => setOpen(false)}>닫기</button>
        </Modal>
      )}
    </div>
  );
}
```

---

### 구현 포인트

* `usePortal`은 DOM 요소를 생성하고, 필요 시 루트(`id`)도 자동 생성
* **언마운트 시 자동 제거** → 메모리 누수 방지
* `modal-root` 같은 ID를 사용해 한 곳에 모아 관리 가능
* 모달 외에도 **드롭다운, 알림창, 툴팁**에 활용 가능

---

다음은 **81번 `useClipboard` – 클립보드 복사/읽기 훅** 예제로 이어가겠습니다.
진행할까요?
