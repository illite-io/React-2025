좋습니다.
그럼 **React Hooks 시작하기 100제 – 70번 `usePageVisibility` (탭/페이지 가시성 감지)** 예제로 넘어가겠습니다.
(52번에서 `useHover`를 이미 다뤘으므로, 중복을 피해 Page Visibility API를 다룹니다.)

---

## 70. `usePageVisibility` – 탭/페이지 가시성 감지

### 목적

* 사용자가 **다른 탭으로 전환하거나 창을 최소화**했는지 감지
* 비활성 시 애니메이션/타이머 일시정지, 폴링 빈도 축소, 소리 끄기 등 최적화

---

### 파일 경로: `src/hooks/usePageVisibility.js`

```javascript
import { useEffect, useState } from 'react';

/**
 * usePageVisibility
 * @returns {boolean} visible - 문서가 보이는 상태인지 여부
 */
export default function usePageVisibility() {
  const getVisible = () =>
    typeof document !== 'undefined' ? document.visibilityState === 'visible' : true;

  const [visible, setVisible] = useState(getVisible);

  useEffect(() => {
    const onChange = () => setVisible(getVisible());
    document.addEventListener('visibilitychange', onChange);
    return () => document.removeEventListener('visibilitychange', onChange);
  }, []);

  return visible;
}
```

---

### 사용 예시

**파일 경로:** `src/App.js`

```javascript
import React, { useEffect, useRef, useState } from 'react';
import usePageVisibility from './hooks/usePageVisibility';

export default function App() {
  const visible = usePageVisibility();
  const [tick, setTick] = useState(0);
  const timerRef = useRef(null);

  // 탭이 보일 때만 타이머 동작
  useEffect(() => {
    if (visible) {
      timerRef.current = setInterval(() => setTick((t) => t + 1), 1000);
    }
    return () => {
      if (timerRef.current) {
        clearInterval(timerRef.current);
        timerRef.current = null;
      }
    };
  }, [visible]);

  return (
    <div style={{ padding: 24 }}>
      <h1>usePageVisibility – 탭/페이지 가시성 감지</h1>
      <p>
        현재 상태: <strong>{visible ? '보이는 중' : '숨김(백그라운드)'}</strong>
      </p>
      <p>보이는 동안만 증가하는 타이머: {tick}s</p>
      <small style={{ color: '#64748b' }}>
        다른 탭으로 전환하거나 창을 최소화하면 타이머가 일시정지됩니다.
      </small>
    </div>
  );
}
```

---

### 핵심 포인트

* `document.visibilityState`가 `'visible' | 'hidden'`을 제공하며, 이벤트는 `visibilitychange`
* 비가시 상태에서 **CPU/GPU 자원 낭비를 줄이는 최적화**에 유용
* 애니메이션, 오디오 재생, 폴링 간격 조절 등과 쉽게 결합 가능

---

다음은 **71번 `useDocumentTitle` – 문서 제목 동기화** 예제로 이어가겠습니다.
