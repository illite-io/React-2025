좋습니다.
그럼 **React Hooks 시작하기 100제 – 67번 `useIntersectionObserver` (뷰포트 진입/이탈 감지)** 예제로 넘어가겠습니다.

---

## 67. `useIntersectionObserver` – 뷰포트 진입/이탈 감지

### 목적

* 요소가 **화면에 보이는지 여부**를 추적
* 무한 스크롤, 지연 로딩(lazy loading), 애니메이션 트리거 등에 활용

---

### 파일 경로: `src/hooks/useIntersectionObserver.js`

```javascript
import { useEffect, useRef, useState } from 'react';

/**
 * useIntersectionObserver
 * @param {Object} options IntersectionObserver 옵션
 * @param {string} [options.rootMargin='0px']
 * @param {number|number[]} [options.threshold=0]
 * @returns {[ref, isIntersecting]} 
 * - ref: 관찰할 요소에 연결할 ref
 * - isIntersecting: 현재 요소가 뷰포트에 보이는지 여부
 */
export default function useIntersectionObserver({
  root = null,
  rootMargin = '0px',
  threshold = 0,
} = {}) {
  const ref = useRef(null);
  const [isIntersecting, setIsIntersecting] = useState(false);

  useEffect(() => {
    const target = ref.current;
    if (!target) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        setIsIntersecting(entry.isIntersecting);
      },
      { root, rootMargin, threshold }
    );

    observer.observe(target);

    return () => {
      observer.unobserve(target);
    };
  }, [root, rootMargin, threshold]);

  return [ref, isIntersecting];
}
```

---

### 사용 예시 – 무한 스크롤 트리거

**파일 경로:** `src/App.js`

```javascript
import React, { useState, useEffect } from 'react';
import useIntersectionObserver from './hooks/useIntersectionObserver';

export default function App() {
  const [items, setItems] = useState(Array.from({ length: 20 }, (_, i) => i + 1));
  const [ref, inView] = useIntersectionObserver({ rootMargin: '100px' });

  useEffect(() => {
    if (inView) {
      setTimeout(() => {
        setItems((prev) => [
          ...prev,
          ...Array.from({ length: 10 }, (_, i) => prev.length + i + 1),
        ]);
      }, 500); // API 호출 흉내
    }
  }, [inView]);

  return (
    <div style={{ padding: 24 }}>
      <h1>useIntersectionObserver – 뷰포트 진입 감지</h1>
      <ul>
        {items.map((num) => (
          <li
            key={num}
            style={{
              height: 50,
              borderBottom: '1px solid #e5e7eb',
              display: 'flex',
              alignItems: 'center',
              paddingLeft: 8,
            }}
          >
            아이템 {num}
          </li>
        ))}
      </ul>
      <div
        ref={ref}
        style={{
          height: 40,
          background: '#f1f5f9',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          marginTop: 8,
        }}
      >
        {inView ? '로딩 중...' : '스크롤 다운'}
      </div>
    </div>
  );
}
```

---

### 구현 포인트

* `IntersectionObserver`는 성능 친화적이며 스크롤 이벤트보다 효율적
* `rootMargin`을 사용해 **미리 로드** 가능 (예: `'100px'`이면 100px 전에 감지)
* `threshold`를 조절해 **요소가 얼마나 보여야 감지할지** 결정 가능
* 무한 스크롤뿐만 아니라 이미지 \*\*지연 로딩(lazy loading)\*\*에도 사용 가능

---

다음은 **68번 `useOnClickOutside` – 영역 밖 클릭 감지** 예제로 진행할까요?
