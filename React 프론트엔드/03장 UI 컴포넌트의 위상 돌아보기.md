
# 03장. UI 컴포넌트의 위상 돌아보기

## 3.1 왜 중요하나

* 컴포넌트는 프론트엔드의 **단위 추상화**. 재사용·조합·테스트의 기본.

## 3.2 위상

* 도메인 UI를 **작은 컴포넌트 트리**로 모델링.
* Props(입력), 이벤트(출력), 슬롯/children(구성)으로 계약을 유지.

## 3.3 추상화/인터페이스/캡슐화

* 구현을 숨기고 \*\*명세(Props/Events)\*\*만 노출 → 교체 가능성↑.

## 3.4 바닐라 JS 컴포넌트 만들기

**/03-vanilla/Toggle.js**

```js
export function createToggle({ label = '토글', onChange } = {}) {
  const root = document.createElement('button');
  let on = false;
  const render = () => {
    root.textContent = `${label}: ${on ? 'ON' : 'OFF'}`;
    root.setAttribute('aria-pressed', on);
  };
  root.addEventListener('click', () => {
    on = !on;
    render();
    onChange?.(on);
  });
  render();
  return root; // 외부엔 버튼(인터페이스)만 노출
}
```

**/03-vanilla/index.html**

```html
<div id="app"></div>
<script type="module">
  import { createToggle } from './Toggle.js';
  const toggle = createToggle({
    label: '알림',
    onChange: v => console.log('상태:', v)
  });
  document.getElementById('app').appendChild(toggle);
</script>
```

## 3.5 웹 컴포넌트 API로 만들기

**/03-webc/toggle.js**

```js
class XToggle extends HTMLElement {
  #on = false; // 캡슐화(프라이빗 필드)
  static get observedAttributes() { return ['label']; }
  get on() { return this.#on; }
  set on(v) { this.#on = Boolean(v); this.#render(); }

  constructor() { super(); this.attachShadow({ mode: 'open' }); }
  attributeChangedCallback() { this.#render(); }
  connectedCallback() { this.#render(); }

  #render() {
    const label = this.getAttribute('label') ?? '토글';
    this.shadowRoot.innerHTML = `
      <button aria-pressed="${this.#on}">${label}: ${this.#on ? 'ON' : 'OFF'}</button>
      <style>button{padding:6px 10px;border:1px solid #ccc;border-radius:6px}</style>
    `;
    this.shadowRoot.querySelector('button').onclick = () => {
      this.on = !this.on;
      this.dispatchEvent(new CustomEvent('change', { detail: this.on }));
    };
  }
}
customElements.define('x-toggle', XToggle);
```

**/03-webc/index.html**

```html
<x-toggle label="알림"></x-toggle>
<script type="module" src="./toggle.js"></script>
<script>
  document.querySelector('x-toggle').addEventListener('change', e => {
    console.log('변경됨:', e.detail);
  });
</script>
```

## 3.6 바닐라 vs 웹 컴포넌트 비교

* 바닐라: 의존성 0, 간단. 표준 수명주기/캡슐화는 수동.
* 웹 컴포넌트: 표준 수명주기/Shadow DOM/캡슐화 제공. 러닝커브 존재.

**핵심 키워드 리마인드**
추상화/인터페이스/캡슐화/Shadow DOM/Custom Elements

---