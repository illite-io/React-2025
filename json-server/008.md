μΆ‹μ•„μ”! μ—¬κΈ°μ„λ” `axios` μ„¤μ •μ„ μ„ν• **config κ°€μ΄λ“**λ¥Ό μ•„μ£Ό μμ„Έν μ„¤λ…ν•΄λ“λ¦΄κ²μ”.
**κΈ°λ³Έ μ„¤μ •λ¶€ν„° μΈν„°μ…‰ν„°, μ—λ¬ μ²λ¦¬, ν† ν° μλ™ μ‚½μ…**κΉμ§€ ν• λ²μ— μµν μ μλ„λ΅ κµ¬μ„±ν–μµλ‹λ‹¤.

---

# β… 1. axios κΈ°λ³Έ μΈμ¤ν„΄μ¤ λ§λ“¤κΈ°

π“„ `/src/api/axios.js`

```js
import axios from 'axios';

// β… axios κΈ°λ³Έ μ„¤μ • μΈμ¤ν„΄μ¤ μƒμ„±
const instance = axios.create({
  baseURL: 'http://localhost:3001', // API μ„λ²„ μ£Όμ†
  timeout: 5000, // μ”μ²­ μ ν• μ‹κ°„ (ms)
  headers: {
    'Content-Type': 'application/json',
  },
});

export default instance;
```

> `axios.create()`λ΅ λ§λ“  μΈμ¤ν„΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄, λ§¤λ² URL, headerλ¥Ό μ• μ¨λ„ λ¨.

---

# β… 2. μ”μ²­(Request) μΈν„°μ…‰ν„° μ„¤μ •

```js
// β… μ”μ²­ μ „ μ‹¤ν–‰λλ” μΈν„°μ…‰ν„° (μ: ν† ν° μλ™ μ‚½μ…)
instance.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token'); // λλ” sessionStorage
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error); // μ”μ²­ μ—λ¬ λ°μƒ μ‹
  }
);
```

---

# β… 3. μ‘λ‹µ(Response) μΈν„°μ…‰ν„° μ„¤μ •

```js
// β… μ‘λ‹µ ν›„ μ‹¤ν–‰λλ” μΈν„°μ…‰ν„°
instance.interceptors.response.use(
  (response) => {
    return response; // μ„±κ³µ μ‘λ‹µ κ·Έλ€λ΅ μ „λ‹¬
  },
  (error) => {
    if (error.response) {
      // μ„λ²„ μ‘λ‹µ μ—λ¬
      if (error.response.status === 401) {
        alert('μΈμ¦μ΄ λ§λ£λμ—μµλ‹λ‹¤. λ‹¤μ‹ λ΅κ·ΈμΈν•μ„Έμ”.');
        localStorage.removeItem('token');
        window.location.href = '/login';
      }
    } else {
      alert('λ„¤νΈμ›ν¬ μ¤λ¥ λλ” μ„λ²„κ°€ μ‘λ‹µν•μ§€ μ•μµλ‹λ‹¤.');
    }

    return Promise.reject(error);
  }
);
```

---

# β… 4. μ‹¤μ  μ‚¬μ© μμ‹

π“„ `/src/api/posts.js`

```js
import api from './axios'; // μ„μ—μ„ λ§λ“  μΈμ¤ν„΄μ¤ import

export const getPosts = () => api.get('/posts');

export const getPostById = (id) => api.get(`/posts/${id}`);

export const createPost = (data) => api.post('/posts', data);

export const updatePost = (id, data) => api.put(`/posts/${id}`, data);

export const deletePost = (id) => api.delete(`/posts/${id}`);
```

---

# β… 5. μ¶”κ°€ μµμ…λ“¤

| μµμ…                      | μ„¤λ…              |
| ----------------------- | --------------- |
| `withCredentials: true` | μΏ ν‚¤ ν¬ν•¨ μ”μ²­ μ‹ ν•„μ”   |
| `params`                | URL μΏΌλ¦¬μ¤νΈλ§ μλ™ μƒμ„± |
| `timeout`               | μ”μ²­ μ ν• μ‹κ°„ μ΄ μ„¤μ •   |

```js
api.get('/posts', {
  params: {
    _sort: 'createdAt',
    _order: 'desc',
  },
});
```

β†’ μλ™μΌλ΅ `/posts?_sort=createdAt&_order=desc` μ”μ²­λ¨

---

# β… μ „μ²΄ κµ¬μ΅° μμ‹ μ”μ•½

```
src/
β”β”€β”€ api/
β”‚   β”β”€β”€ axios.js         β† axios μΈμ¤ν„΄μ¤ + μΈν„°μ…‰ν„°
β”‚   β””β”€β”€ posts.js         β† κ²μ‹κΈ€ API ν•¨μ λ¨μ
```

---

# β… μ°Έκ³ : κΈ°λ³Έ axios μ‚¬μ© (μΈμ¤ν„΄μ¤ μ—†μ΄)

```js
import axios from 'axios';

axios.get('http://localhost:3001/posts', {
  headers: {
    Authorization: 'Bearer my-token',
  },
});
```

> ν•μ§€λ§ μ„μ²λΌ λ§¤λ² baseURL, headers μ“°λ” κ²ƒλ³΄λ‹¨ `axios.create()`λ΅ **κ³µν†µ μ„¤μ •μ„ λ¶„λ¦¬**ν•λ” κ² μ μ§€λ³΄μμ— μΆ‹μ•„μ”.

---

ν•„μ”ν•μ‹λ©΄ π‘‡ λ‹¤μ μ£Όμ λ΅ μ΄μ–΄λ“λ¦΄κ²μ”:

* β… axiosλ΅ μ΄λ―Έμ§€ μ—…λ΅λ“ (form-data μ „μ†΅)
* β… axios μ¤λ¥λ³„ μ²λ¦¬ (400, 401, 500 λ“± λ¶„κΈ°)
* β… axios + React Query μ΅°ν•© μμ‹

λ‹¤μ μ£Όμ λ¥Ό μ›ν•μ‹λ©΄ `"λ‹¤μ"` λλ” `"axios + μ΄λ―Έμ§€ μ—…λ΅λ“"`μ²λΌ μ…λ ¥ν•΄μ£Όμ„Έμ”!
