좋습니다. 이제 **29번 – useEffect 이벤트 리스너 등록/해제** 예제를 보겠습니다.

---

## 29. useEffect 이벤트 리스너 등록/해제

### 핵심 개념

* `useEffect`는 컴포넌트가 마운트될 때 이벤트를 등록하고,
  언마운트될 때 자동으로 해제하는 데 적합합니다.
* 이를 통해 **메모리 누수 방지** 및 **중복 이벤트 등록 방지** 가능.

---

### 파일 경로 / 파일명

```
src/App.js
```

### 예시 코드

```javascript
import React, { useEffect, useState } from 'react';

export default function App() {
  const [windowWidth, setWindowWidth] = useState(window.innerWidth);

  useEffect(() => {
    // 이벤트 핸들러 정의
    const handleResize = () => {
      setWindowWidth(window.innerWidth);
    };

    // 1) 마운트 시 이벤트 등록
    window.addEventListener('resize', handleResize);

    // 2) 언마운트 시 이벤트 해제
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []); // 빈 배열 → 최초 한 번만 등록

  return (
    <div style={{ padding: 20 }}>
      <h1>useEffect 이벤트 리스너 등록/해제</h1>
      <p>현재 창 너비: {windowWidth}px</p>
      <p>브라우저 창 크기를 조절해보세요.</p>
    </div>
  );
}
```

---

### 코드 설명

1. **이벤트 핸들러 작성**

   ```javascript
   const handleResize = () => {
     setWindowWidth(window.innerWidth);
   };
   ```

2. **이벤트 등록**

   ```javascript
   window.addEventListener('resize', handleResize);
   ```

   * 컴포넌트가 처음 렌더링될 때 실행됨

3. **클린업(cleanup)**

   ```javascript
   return () => {
     window.removeEventListener('resize', handleResize);
   };
   ```

   * 컴포넌트가 언마운트될 때 실행 → 이벤트 등록 해제

4. **의존성 배열 `[]`**

   * `[]`을 넣어 한 번만 실행되도록 제한
   * 만약 상태/props에 의존하는 이벤트라면 그 값을 배열에 넣어야 함

---

### 실행 흐름

1. `App` 마운트 시 → `resize` 이벤트 리스너 등록
2. 창 크기 변경 시 → `handleResize` 실행 → `windowWidth` 상태 업데이트
3. 컴포넌트 언마운트 시 → 리스너 해제

---

### 다른 예시: 키보드 이벤트 등록

```javascript
useEffect(() => {
  const handleKeyDown = (e) => {
    if (e.key === 'Escape') {
      console.log('ESC 눌림');
    }
  };

  document.addEventListener('keydown', handleKeyDown);
  return () => document.removeEventListener('keydown', handleKeyDown);
}, []);
```

---

👉 이렇게 하면 `useEffect`를 이용해 안전하게 이벤트를 등록하고 해제할 수 있습니다.

다음은 **30번 – useEffect 타이머 사용 및 정리**로 넘어가겠습니다. 계속 진행할까요?
