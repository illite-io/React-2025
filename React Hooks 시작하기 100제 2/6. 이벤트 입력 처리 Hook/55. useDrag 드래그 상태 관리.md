좋습니다. 이번에는 **55번 – useDrag 드래그 상태 관리** 예제를 보겠습니다.

---

## 55. useDrag 드래그 상태 관리

### 목표

* 마우스로 특정 요소를 **드래그하여 이동**할 수 있게 만들기
* 드래그 시작/이동/종료 상태를 추적
* `onMouseDown`, `onMouseMove`, `onMouseUp` 이벤트 활용

---

### 파일 경로 / 파일명

```
src/hooks/useDrag.js
src/App.js
```

---

### 1) 커스텀 훅 – `useDrag.js`

```javascript
import { useState, useCallback } from "react";

/**
 * useDrag 훅
 * - 드래그 시작 위치와 현재 위치를 추적
 * - onDragStart, onDragEnd 같은 콜백도 추가 가능
 */
export default function useDrag() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  const [dragging, setDragging] = useState(false);

  const onMouseDown = useCallback((e) => {
    setDragging(true);

    const startX = e.clientX - position.x;
    const startY = e.clientY - position.y;

    const onMouseMove = (moveEvent) => {
      setPosition({
        x: moveEvent.clientX - startX,
        y: moveEvent.clientY - startY,
      });
    };

    const onMouseUp = () => {
      setDragging(false);
      document.removeEventListener("mousemove", onMouseMove);
      document.removeEventListener("mouseup", onMouseUp);
    };

    document.addEventListener("mousemove", onMouseMove);
    document.addEventListener("mouseup", onMouseUp);
  }, [position]);

  return { position, dragging, onMouseDown };
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React from "react";
import useDrag from "./hooks/useDrag";

export default function App() {
  const { position, dragging, onMouseDown } = useDrag();

  return (
    <div style={{ padding: 20, height: "100vh", background: "#f9f9f9" }}>
      <h1>useDrag 드래그 상태 관리</h1>
      <div
        onMouseDown={onMouseDown}
        style={{
          width: 120,
          height: 120,
          background: dragging ? "tomato" : "skyblue",
          borderRadius: 10,
          cursor: "grab",
          position: "absolute",
          left: position.x,
          top: position.y,
          display: "flex",
          alignItems: "center",
          justifyContent: "center",
          userSelect: "none",
        }}
      >
        Drag me
      </div>
    </div>
  );
}
```

---

### 동작 방식

1. `onMouseDown` 시 드래그 시작 → 기준 좌표 저장.
2. `mousemove` 이벤트로 마우스 위치를 계산해 `position` 업데이트.
3. `mouseup` 이벤트 시 드래그 종료.
4. `dragging` 상태에 따라 색상 변화로 피드백 제공.

---

### 활용 아이디어

* **드래그 가능한 카드 UI**
* **캔버스 내 요소 이동**
* **드래그 앤 드롭 보드(Trello 같은 UI)**

---

다음은 **56번 – useDrop 드롭 상태 관리** 예제로 넘어가시겠습니까?
