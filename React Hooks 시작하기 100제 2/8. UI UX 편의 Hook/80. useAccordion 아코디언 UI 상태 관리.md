좋습니다. 이제 **80번 – useAccordion 아코디언 UI 상태 관리** 예제를 보겠습니다.

---

## 80. useAccordion 아코디언 UI 상태 관리

### 목표

* 여러 개의 아코디언 아이템 중 **열린 상태**를 관리
* 단일 모드(하나만 열림)와 다중 모드(여러 개 동시 열림) 지원
* `toggle(index)` 함수 제공

---

### 파일 경로 / 파일명

```
src/hooks/useAccordion.js
src/App.js
```

---

### 1) 커스텀 훅 – `useAccordion.js`

```javascript
import { useState, useCallback } from "react";

/**
 * useAccordion({ multiple = false, initialOpen = [] })
 * - multiple: 여러 개 열기 허용 여부
 * - initialOpen: 기본으로 열린 index 배열
 *
 * 반환:
 * { openItems, isOpen, toggle, open, close }
 */
export default function useAccordion({ multiple = false, initialOpen = [] } = {}) {
  const [openItems, setOpenItems] = useState(initialOpen);

  const isOpen = useCallback((i) => openItems.includes(i), [openItems]);

  const toggle = useCallback(
    (i) => {
      setOpenItems((prev) => {
        if (multiple) {
          return prev.includes(i) ? prev.filter((x) => x !== i) : [...prev, i];
        } else {
          return prev.includes(i) ? [] : [i];
        }
      });
    },
    [multiple]
  );

  const open = useCallback((i) => {
    setOpenItems((prev) => (multiple ? [...new Set([...prev, i])] : [i]));
  }, [multiple]);

  const close = useCallback((i) => {
    setOpenItems((prev) => prev.filter((x) => x !== i));
  }, []);

  return { openItems, isOpen, toggle, open, close };
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React from "react";
import useAccordion from "./hooks/useAccordion";

const items = [
  { title: "아코디언 1", content: "첫 번째 아코디언 내용입니다." },
  { title: "아코디언 2", content: "두 번째 아코디언 내용입니다." },
  { title: "아코디언 3", content: "세 번째 아코디언 내용입니다." },
];

export default function App() {
  const { isOpen, toggle } = useAccordion({ multiple: false });

  return (
    <div style={{ padding: 20 }}>
      <h1>useAccordion 아코디언 UI 상태 관리</h1>
      <div style={{ border: "1px solid #e5e7eb", borderRadius: 8 }}>
        {items.map((item, i) => (
          <div key={i} style={{ borderBottom: "1px solid #e5e7eb" }}>
            <button
              onClick={() => toggle(i)}
              style={{
                width: "100%",
                padding: "10px 14px",
                textAlign: "left",
                background: "#f9fafb",
                border: "none",
                outline: "none",
                fontWeight: "bold",
                cursor: "pointer",
              }}
            >
              {item.title}
            </button>
            {isOpen(i) && (
              <div style={{ padding: "10px 14px", background: "white" }}>
                {item.content}
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

### 동작 방식

1. `useAccordion`은 현재 열린 아이템 인덱스를 배열로 관리
2. `toggle(i)`로 열고 닫기 동작

   * `multiple=false`: 하나만 열림
   * `multiple=true`: 여러 개 동시 열림 가능
3. `isOpen(i)`로 특정 아이템이 열려있는지 확인

---

### 활용 아이디어

* FAQ 리스트 (단일 모드)
* 사이드 메뉴 트리 (다중 모드)
* 설정 패널 그룹 (섹션별 열고 닫기)

---

다음은 **81번 – useAuth 로그인 상태 관리** 예제로 넘어가시겠습니까?
