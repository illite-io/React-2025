좋습니다. 이제 **92번 – useDebounce 디바운스 처리** 예제를 보겠습니다.

---

## 92. useDebounce 디바운스 처리

### 목표

* 입력이 연속으로 발생할 때 마지막 이벤트만 일정 시간 후 실행
* 검색창 입력, 리사이즈 이벤트 처리 등에 활용
* value 기반과 함수 기반 두 가지 패턴 지원

---

### 파일 경로 / 파일명

```
src/hooks/useDebounce.js
src/App.js
```

---

### 1) 커스텀 훅 – `useDebounce.js`

```javascript
import { useEffect, useState, useRef, useCallback } from "react";

/**
 * ① 값 디바운스: useDebounce(value, delay)
 * 입력값이 바뀌고 delay(ms) 지나면 반영됨
 */
export function useDebounceValue(value, delay = 300) {
  const [debounced, setDebounced] = useState(value);

  useEffect(() => {
    const id = setTimeout(() => setDebounced(value), delay);
    return () => clearTimeout(id);
  }, [value, delay]);

  return debounced;
}

/**
 * ② 함수 디바운스: useDebounceFn(fn, delay)
 * 호출할 때마다 delay 안에 다시 호출되면 reset
 */
export function useDebounceFn(fn, delay = 300) {
  const timer = useRef(null);

  const debouncedFn = useCallback(
    (...args) => {
      if (timer.current) clearTimeout(timer.current);
      timer.current = setTimeout(() => {
        fn(...args);
        timer.current = null;
      }, delay);
    },
    [fn, delay]
  );

  // 컴포넌트 언마운트 시 타이머 해제
  useEffect(() => () => clearTimeout(timer.current), []);

  return debouncedFn;
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React, { useState } from "react";
import { useDebounceValue, useDebounceFn } from "./hooks/useDebounce";

export default function App() {
  const [query, setQuery] = useState("");

  // 값 디바운스: 입력값을 500ms 늦게 반영
  const debouncedQuery = useDebounceValue(query, 500);

  // 함수 디바운스: API 호출 같은 곳에 사용
  const logSearch = useDebounceFn((val) => {
    console.log("API 호출:", val);
    alert("검색 API 호출: " + val);
  }, 800);

  return (
    <div style={{ padding: 20 }}>
      <h1>useDebounce 디바운스 처리</h1>

      <div style={{ marginBottom: 16 }}>
        <input
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder="검색어 입력"
          style={{ padding: 8, width: 240 }}
        />
        <p>즉시 입력값: {query}</p>
        <p>디바운스된 값(500ms): {debouncedQuery}</p>
      </div>

      <div>
        <input
          placeholder="API 디바운스 테스트"
          onChange={(e) => logSearch(e.target.value)}
          style={{ padding: 8, width: 240 }}
        />
        <p>0.8초 동안 입력이 멈춰야 API 호출 실행</p>
      </div>
    </div>
  );
}
```

---

### 동작 방식

1. **useDebounceValue**: 입력값이 변하면 타이머를 새로 설정 → delay가 지나야 `debounced` 값 업데이트
2. **useDebounceFn**: 함수 실행 요청을 지연시켜 마지막 호출만 실행

---

### 활용 아이디어

* 검색 자동완성: 사용자가 입력을 멈추면 API 호출
* 리사이즈 이벤트 최적화: `useDebounceFn`으로 윈도우 크기 변경 감지
* 버튼 연속 클릭 방지

---

다음은 **93번 – useThrottle 쓰로틀 처리**로 넘어가겠습니다. 계속 진행할까요?
