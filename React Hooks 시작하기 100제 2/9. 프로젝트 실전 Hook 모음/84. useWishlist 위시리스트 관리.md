좋습니다. 이제 **84번 – useWishlist 위시리스트 관리** 예제를 보겠습니다.

---

## 84. useWishlist 위시리스트 관리

### 목표

* 사용자가 “관심상품(위시리스트)”을 담고 관리
* 토글(`toggle`)로 추가/삭제 간단 처리
* `localStorage`에 저장해 새로고침 후에도 유지
* `has(id)`로 특정 상품이 위시리스트에 있는지 확인 가능

---

### 파일 경로 / 파일명

```
src/hooks/useWishlist.js
src/App.js
```

---

### 1) 커스텀 훅 – `useWishlist.js`

```javascript
import { useState, useEffect, useCallback } from "react";

/**
 * useWishlist({ storageKey }?)
 * - storageKey: localStorage 키 (기본 "wishlist.items")
 *
 * 반환: { items, add, remove, toggle, clear, has }
 */
export default function useWishlist({ storageKey = "wishlist.items" } = {}) {
  const [items, setItems] = useState(() => {
    try {
      const raw = localStorage.getItem(storageKey);
      return raw ? JSON.parse(raw) : [];
    } catch {
      return [];
    }
  });

  // localStorage에 동기화
  useEffect(() => {
    try {
      localStorage.setItem(storageKey, JSON.stringify(items));
    } catch {}
  }, [items, storageKey]);

  const add = useCallback((item) => {
    setItems((prev) => (prev.find((x) => x.id === item.id) ? prev : [...prev, item]));
  }, []);

  const remove = useCallback((id) => {
    setItems((prev) => prev.filter((x) => x.id !== id));
  }, []);

  const toggle = useCallback((item) => {
    setItems((prev) =>
      prev.find((x) => x.id === item.id)
        ? prev.filter((x) => x.id !== item.id)
        : [...prev, item]
    );
  }, []);

  const clear = useCallback(() => setItems([]), []);
  const has = useCallback((id) => items.some((x) => x.id === id), [items]);

  return { items, add, remove, toggle, clear, has };
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React from "react";
import useWishlist from "./hooks/useWishlist";

const PRODUCTS = [
  { id: "p1", name: "레드 드레스", price: 59000 },
  { id: "p2", name: "블루 자켓", price: 89000 },
  { id: "p3", name: "화이트 셔츠", price: 39000 },
];

export default function App() {
  const { items, toggle, has, remove, clear } = useWishlist();

  return (
    <div style={{ padding: 20, maxWidth: 720, margin: "0 auto" }}>
      <h1>useWishlist 위시리스트 관리</h1>

      <h2>상품 목록</h2>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fit,minmax(220px,1fr))", gap: 12 }}>
        {PRODUCTS.map((p) => (
          <div key={p.id} style={{ border: "1px solid #e5e7eb", borderRadius: 8, padding: 12 }}>
            <strong>{p.name}</strong>
            <p>{p.price.toLocaleString()}원</p>
            <button onClick={() => toggle(p)}>
              {has(p.id) ? "위시리스트 제거" : "위시리스트 추가"}
            </button>
          </div>
        ))}
      </div>

      <h2 style={{ marginTop: 24 }}>내 위시리스트</h2>
      {items.length === 0 ? (
        <p>위시리스트가 비어 있습니다.</p>
      ) : (
        <ul>
          {items.map((it) => (
            <li key={it.id} style={{ marginBottom: 8 }}>
              {it.name} - {it.price.toLocaleString()}원
              <button onClick={() => remove(it.id)} style={{ marginLeft: 10 }}>
                제거
              </button>
            </li>
          ))}
        </ul>
      )}
      {items.length > 0 && (
        <button onClick={clear} style={{ marginTop: 8 }}>
          전체 비우기
        </button>
      )}
    </div>
  );
}
```

---

### 동작 방식

1. `toggle(item)` → 위시리스트에 없으면 추가, 있으면 제거
2. `has(id)` → 특정 상품 포함 여부 확인
3. `localStorage` 동기화로 새로고침 후에도 유지
4. `clear()` → 전체 삭제

---

### 활용 아이디어

* 상품 상세 페이지 “하트(♡)” 버튼 구현
* 장바구니와 병행 → `useCart` + `useWishlist`
* 추천/맞춤 UI: 위시리스트 기반 추천 노출

---

다음은 **85번 – useOrder 주문 상태 관리** 예제로 넘어가시겠습니까?
