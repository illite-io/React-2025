좋습니다. 이제 **36번 – usePrevious 이전 상태 값 저장** 예제를 보겠습니다.

---

## 36. usePrevious 이전 상태 값 저장

### 핵심 개념

* `useState` 값은 현재 상태만 저장함 → 이전 상태를 직접 관리해야 할 때 `useRef`를 활용
* `usePrevious` 훅은 **렌더링 직전 상태값을 기억**해 다음 렌더링에서 활용할 수 있도록 함

---

### 파일 경로 / 파일명

```
src/hooks/usePrevious.js
src/App.js
```

---

### 1) 커스텀 훅 – `usePrevious.js`

```javascript
import { useEffect, useRef } from 'react';

/**
 * usePrevious(value)
 * - 전달된 value의 이전 상태를 반환
 */
export default function usePrevious(value) {
  const ref = useRef();

  // 매 렌더링 직후 value를 ref에 저장
  useEffect(() => {
    ref.current = value;
  }, [value]);

  // 이전 렌더링에서의 값을 반환
  return ref.current;
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React, { useState } from 'react';
import usePrevious from './hooks/usePrevious';

export default function App() {
  const [count, setCount] = useState(0);
  const prevCount = usePrevious(count);

  return (
    <div style={{ padding: 20 }}>
      <h1>usePrevious 예제</h1>
      <p>현재 count: {count}</p>
      <p>이전 count: {prevCount === undefined ? '없음' : prevCount}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
      <button onClick={() => setCount(count - 1)}>-1</button>
    </div>
  );
}
```

---

### 실행 흐름

1. `count`가 바뀌면 리렌더링 발생
2. `useEffect` 안에서 `ref.current = count` 실행 → 다음 렌더링에서 `prevCount`로 활용 가능
3. 따라서 화면에는 `현재 값`과 `이전 값`을 동시에 표시 가능

---

### 활용 아이디어

* 애니메이션 시 이전 좌표 → 현재 좌표 비교
* 값 변경 여부 감지 (예: 검색 필터가 바뀌었는지 확인)
* 특정 값이 증가/감소했는지에 따라 색상이나 스타일 다르게 적용

---

👉 다음은 **37번 – useOnClickOutside 바깥 클릭 감지** 예제로 넘어가겠습니다. 계속 진행할까요?
