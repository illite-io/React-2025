좋습니다. 이제 **40번 – useOnlineStatus 온라인/오프라인 상태 감지** 예제를 보겠습니다.

---

## 40. useOnlineStatus 온라인/오프라인 상태 감지

### 핵심 개념

* 브라우저는 `navigator.onLine` 속성을 제공 → 현재 온라인 여부 알 수 있음
* `online`, `offline` 이벤트를 감지하여 상태를 갱신
* 네트워크 연결 상태 표시, 오프라인 모드 지원 등에 유용

---

### 파일 경로 / 파일명

```
src/hooks/useOnlineStatus.js
src/App.js
```

---

### 1) 커스텀 훅 – `useOnlineStatus.js`

```javascript
import { useEffect, useState } from 'react';

/**
 * useOnlineStatus()
 * - 브라우저 네트워크 연결 상태를 추적
 * - 반환값: true(온라인) / false(오프라인)
 */
export default function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(navigator.onLine);

  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    // 정리(cleanup)
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  return isOnline;
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React from 'react';
import useOnlineStatus from './hooks/useOnlineStatus';

export default function App() {
  const isOnline = useOnlineStatus();

  return (
    <div style={{ padding: 20 }}>
      <h1>useOnlineStatus 예제</h1>
      <p>
        현재 상태:{" "}
        <span style={{ color: isOnline ? "green" : "red", fontWeight: "bold" }}>
          {isOnline ? "온라인" : "오프라인"}
        </span>
      </p>
      {!isOnline && <p>⚠️ 네트워크 연결이 끊겼습니다. 오프라인 모드로 전환합니다.</p>}
    </div>
  );
}
```

---

### 실행 흐름

1. `navigator.onLine` 값으로 초기 상태 설정
2. 온라인 → `online` 이벤트 발생 → `isOnline = true`
3. 오프라인 → `offline` 이벤트 발생 → `isOnline = false`

---

### 활용 아이디어

* 오프라인 캐싱 기능 (IndexedDB, localStorage와 결합)
* 네트워크 상태에 따라 버튼 비활성화
* PWA(Progressive Web App)에서 오프라인 모드 지원

---

👉 다음은 **41번 – useReducer 다중 상태 관리** 예제로 넘어가겠습니다. 진행할까요?
