좋습니다. 이제 **34번 – useLocalStorage 로컬 스토리지 상태 저장** 예제를 보겠습니다.

---

## 34. useLocalStorage 로컬 스토리지 상태 저장

### 핵심 개념

* `useState`와 동일하게 동작하지만, 값이 **localStorage**에 자동 저장/동기화됨
* 새로고침하거나 앱을 껐다 켜도 값이 유지됨
* 브라우저 내에서 간단한 캐시나 사용자 설정 저장에 적합

---

### 파일 경로 / 파일명

```
src/hooks/useLocalStorage.js
src/App.js
```

---

### 1) 커스텀 훅 – `useLocalStorage.js`

```javascript
import { useState, useEffect } from 'react';

/**
 * useLocalStorage(key, initialValue)
 * - key: localStorage에 저장될 key 값
 * - initialValue: 기본값
 */
export default function useLocalStorage(key, initialValue) {
  // 초기값: localStorage에 값이 있으면 그걸 사용, 없으면 initialValue
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error("로컬스토리지 읽기 오류:", error);
      return initialValue;
    }
  });

  // 값이 변경될 때 localStorage에 동기화
  useEffect(() => {
    try {
      window.localStorage.setItem(key, JSON.stringify(storedValue));
    } catch (error) {
      console.error("로컬스토리지 저장 오류:", error);
    }
  }, [key, storedValue]);

  return [storedValue, setStoredValue];
}
```

---

### 2) 사용 예제 – `App.js`

```javascript
import React from 'react';
import useLocalStorage from './hooks/useLocalStorage';

export default function App() {
  const [name, setName] = useLocalStorage("username", "");
  const [darkMode, setDarkMode] = useLocalStorage("darkMode", false);

  return (
    <div style={{ padding: 20, background: darkMode ? "#333" : "#fff", color: darkMode ? "#fff" : "#000" }}>
      <h1>useLocalStorage 로컬 스토리지 상태 저장</h1>

      <div>
        <label>이름 입력: </label>
        <input
          type="text"
          value={name}
          onChange={(e) => setName(e.target.value)}
        />
        <p>안녕하세요, {name || "익명"}님!</p>
      </div>

      <div>
        <label>
          <input
            type="checkbox"
            checked={darkMode}
            onChange={() => setDarkMode(!darkMode)}
          />
          다크 모드
        </label>
      </div>
    </div>
  );
}
```

---

### 실행 흐름

1. `useLocalStorage("username", "")` → localStorage에서 `"username"` 값 확인

   * 있으면 그 값 사용, 없으면 빈 문자열("") 사용
2. 사용자가 input에 이름 입력 → `setName` 호출 → 상태 업데이트 + localStorage 동기화
3. 다크 모드 체크박스 클릭 → `darkMode` 값이 `true/false`로 바뀌고 저장
4. 새로고침해도 이전 값이 그대로 유지됨

---

### 활용 아이디어

* 다크 모드 / 라이트 모드 설정 저장
* 최근 검색어 캐싱
* 장바구니 정보 저장

---

👉 다음은 **35번 – useSessionStorage 세션 스토리지 상태 저장** 예제로 넘어가겠습니다. 계속 진행할까요?
