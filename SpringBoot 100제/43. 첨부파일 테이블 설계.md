### 43. 게시글 조회 API (단건/전체)

---

#### 1) **목표**

* 게시글 **전체 조회 API**와 **단건 조회 API** 작성
* `board` 테이블의 데이터 반환

---

#### 2) **Mapper 인터페이스 수정**

**경로**: `src/main/java/com/example/springbootstart/mapper/BoardMapper.java`

```java
package com.example.springbootstart.mapper;

import com.example.springbootstart.dto.BoardDto;
import org.apache.ibatis.annotations.Mapper;
import java.util.List;

@Mapper
public interface BoardMapper {
    int insertBoard(BoardDto board);
    List<BoardDto> findAllBoards();   // 전체 조회
    BoardDto findBoardById(Long id);  // 단건 조회
}
```

---

#### 3) **Mapper XML 수정**

**경로**: `src/main/resources/mapper/BoardMapper.xml`

```xml
<mapper namespace="com.example.springbootstart.mapper.BoardMapper">

    <insert id="insertBoard" parameterType="com.example.springbootstart.dto.BoardDto">
        INSERT INTO board (user_id, title, content)
        VALUES (#{userId}, #{title}, #{content})
    </insert>

    <select id="findAllBoards" resultType="com.example.springbootstart.dto.BoardDto">
        SELECT id, user_id AS userId, title, content, created_at AS createdAt, updated_at AS updatedAt
        FROM board
        ORDER BY id DESC
    </select>

    <select id="findBoardById" parameterType="long" resultType="com.example.springbootstart.dto.BoardDto">
        SELECT id, user_id AS userId, title, content, created_at AS createdAt, updated_at AS updatedAt
        FROM board
        WHERE id = #{id}
    </select>
</mapper>
```

---

#### 4) **Service 수정**

**경로**: `src/main/java/com/example/springbootstart/service/BoardService.java`

```java
package com.example.springbootstart.service;

import com.example.springbootstart.dto.BoardDto;
import com.example.springbootstart.mapper.BoardMapper;
import org.springframework.stereotype.Service;
import java.util.List;

@Service
public class BoardService {
    private final BoardMapper boardMapper;

    public BoardService(BoardMapper boardMapper) {
        this.boardMapper = boardMapper;
    }

    public int createBoard(BoardDto boardDto) {
        return boardMapper.insertBoard(boardDto);
    }

    public List<BoardDto> getAllBoards() {
        return boardMapper.findAllBoards();
    }

    public BoardDto getBoard(Long id) {
        return boardMapper.findBoardById(id);
    }
}
```

---

#### 5) **Controller 수정**

**경로**: `src/main/java/com/example/springbootstart/controller/BoardController.java`

```java
package com.example.springbootstart.controller;

import com.example.springbootstart.dto.BoardDto;
import com.example.springbootstart.service.BoardService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/boards")
public class BoardController {

    private final BoardService boardService;

    public BoardController(BoardService boardService) {
        this.boardService = boardService;
    }

    @PostMapping
    public ResponseEntity<?> createBoard(@RequestBody BoardDto boardDto) {
        int result = boardService.createBoard(boardDto);
        return result == 1 ? ResponseEntity.ok("게시글 등록 성공")
                           : ResponseEntity.badRequest().body("게시글 등록 실패");
    }

    // 전체 게시글 조회
    @GetMapping
    public List<BoardDto> getAllBoards() {
        return boardService.getAllBoards();
    }

    // 특정 게시글 조회
    @GetMapping("/{id}")
    public ResponseEntity<?> getBoard(@PathVariable Long id) {
        BoardDto board = boardService.getBoard(id);
        return board != null ? ResponseEntity.ok(board)
                             : ResponseEntity.notFound().build();
    }
}
```

---

#### 6) **테스트 요청**

1. **전체 조회**

   ```
   GET http://localhost:8080/boards
   ```

   **응답(JSON 예시)**

   ```json
   [
     {
       "id": 2,
       "userId": 2,
       "title": "두 번째 게시글",
       "content": "이순신 장군입니다.",
       "createdAt": "2025-08-03T12:00:00",
       "updatedAt": "2025-08-03T12:00:00"
     },
     {
       "id": 1,
       "userId": 1,
       "title": "첫 번째 게시글",
       "content": "안녕하세요, 첫 번째 게시글입니다.",
       "createdAt": "2025-08-03T12:00:00",
       "updatedAt": "2025-08-03T12:00:00"
     }
   ]
   ```

2. **단건 조회**

   ```
   GET http://localhost:8080/boards/1
   ```

   **응답(JSON 예시)**

   ```json
   {
     "id": 1,
     "userId": 1,
     "title": "첫 번째 게시글",
     "content": "안녕하세요, 첫 번째 게시글입니다.",
     "createdAt": "2025-08-03T12:00:00",
     "updatedAt": "2025-08-03T12:00:00"
   }
   ```

---

#### 7) **결과**

* 게시판 전체/단건 조회 기능 정상 작동 확인

---

**다음 단계는 `44. 게시글 수정 API` 입니다. 진행할까요?**
