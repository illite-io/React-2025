### 52. 페이징 처리 (게시글 목록)

---

#### 1) **목표**

* 게시글 목록을 **페이지 단위**로 조회
* `page`, `size` 파라미터를 받아 데이터 분리
* SQL: `LIMIT` + `OFFSET` 사용

---

#### 2) **Mapper 인터페이스**

**경로**: `src/main/java/com/example/springbootstart/mapper/BoardMapper.java`

```java
package com.example.springbootstart.mapper;

import com.example.springbootstart.dto.BoardDto;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import java.util.List;

@Mapper
public interface BoardMapper {
    List<BoardDto> findBoardsByPaging(@Param("offset") int offset, @Param("size") int size);
    int countBoards();  // 전체 게시글 수
}
```

---

#### 3) **Mapper XML**

**경로**: `src/main/resources/mapper/BoardMapper.xml`

```xml
<select id="findBoardsByPaging" resultType="com.example.springbootstart.dto.BoardDto">
    SELECT id, user_id AS userId, title, content, created_at AS createdAt, updated_at AS updatedAt
    FROM board
    ORDER BY id DESC
    LIMIT #{size} OFFSET #{offset}
</select>

<select id="countBoards" resultType="int">
    SELECT COUNT(*) FROM board
</select>
```

---

#### 4) **Service**

**경로**: `src/main/java/com/example/springbootstart/service/BoardService.java`

```java
public List<BoardDto> getBoardsByPaging(int page, int size) {
    int offset = (page - 1) * size;
    return boardMapper.findBoardsByPaging(offset, size);
}

public int getBoardCount() {
    return boardMapper.countBoards();
}
```

---

#### 5) **Controller**

**경로**: `src/main/java/com/example/springbootstart/controller/BoardController.java`

```java
@GetMapping("/page")
public ResponseEntity<?> getBoardsByPaging(
        @RequestParam(defaultValue = "1") int page,
        @RequestParam(defaultValue = "10") int size) {

    var boards = boardService.getBoardsByPaging(page, size);
    int total = boardService.getBoardCount();
    return ResponseEntity.ok(
        Map.of("page", page,
               "size", size,
               "total", total,
               "boards", boards)
    );
}
```

---

#### 6) **테스트 요청**

**GET 요청**

```
http://localhost:8080/boards/page?page=1&size=2
```

**응답(JSON 예시)**

```json
{
  "page": 1,
  "size": 2,
  "total": 5,
  "boards": [
    {
      "id": 5,
      "userId": 1,
      "title": "다섯 번째 게시글",
      "content": "내용5",
      "createdAt": "2025-08-03T12:00:00",
      "updatedAt": "2025-08-03T12:00:00"
    },
    {
      "id": 4,
      "userId": 2,
      "title": "네 번째 게시글",
      "content": "내용4",
      "createdAt": "2025-08-03T12:00:00",
      "updatedAt": "2025-08-03T12:00:00"
    }
  ]
}
```

---

#### 7) **결과**

* 페이징 처리가 정상 동작
* 총 게시글 수와 함께 응답 → 프론트엔드 페이지네이션 구현 가능

---

**다음 단계는 `53. 게시글 검색 기능(제목)` 입니다. 진행할까요?**
