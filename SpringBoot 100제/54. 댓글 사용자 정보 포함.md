### 54. 게시글 + 댓글 개수 함께 조회

---

#### 1) **목표**

* 게시글 목록 조회 시 **댓글 개수**를 함께 반환
* 프론트엔드에서 댓글 수 표시 가능

---

#### 2) **DTO 수정**

**경로**: `src/main/java/com/example/springbootstart/dto/BoardWithCommentCountDto.java`

```java
package com.example.springbootstart.dto;

import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class BoardWithCommentCountDto {
    private Long id;
    private Long userId;
    private String title;
    private String content;
    private String createdAt;
    private String updatedAt;
    private int commentCount; // 댓글 개수
}
```

---

#### 3) **Mapper 인터페이스**

**경로**: `src/main/java/com/example/springbootstart/mapper/BoardMapper.java`

```java
package com.example.springbootstart.mapper;

import com.example.springbootstart.dto.BoardWithCommentCountDto;
import org.apache.ibatis.annotations.Mapper;
import java.util.List;

@Mapper
public interface BoardMapper {
    List<BoardWithCommentCountDto> findBoardsWithCommentCount();
}
```

---

#### 4) **Mapper XML**

**경로**: `src/main/resources/mapper/BoardMapper.xml`

```xml
<select id="findBoardsWithCommentCount" resultType="com.example.springbootstart.dto.BoardWithCommentCountDto">
    SELECT 
        b.id, 
        b.user_id AS userId,
        b.title, 
        b.content,
        b.created_at AS createdAt,
        b.updated_at AS updatedAt,
        (SELECT COUNT(*) FROM comment c WHERE c.board_id = b.id) AS commentCount
    FROM board b
    ORDER BY b.id DESC
</select>
```

---

#### 5) **Service**

**경로**: `src/main/java/com/example/springbootstart/service/BoardService.java`

```java
import com.example.springbootstart.dto.BoardWithCommentCountDto;

public List<BoardWithCommentCountDto> getBoardsWithCommentCount() {
    return boardMapper.findBoardsWithCommentCount();
}
```

---

#### 6) **Controller**

**경로**: `src/main/java/com/example/springbootstart/controller/BoardController.java`

```java
@GetMapping("/with-comment-count")
public ResponseEntity<?> getBoardsWithCommentCount() {
    var boards = boardService.getBoardsWithCommentCount();
    return ResponseEntity.ok(boards);
}
```

---

#### 7) **테스트 요청**

**GET 요청**

```
http://localhost:8080/boards/with-comment-count
```

**응답(JSON 예시)**

```json
[
  {
    "id": 1,
    "userId": 1,
    "title": "첫 번째 게시글",
    "content": "안녕하세요, 첫 번째 게시글입니다.",
    "createdAt": "2025-08-03T12:00:00",
    "updatedAt": "2025-08-03T12:00:00",
    "commentCount": 2
  },
  {
    "id": 2,
    "userId": 2,
    "title": "두 번째 게시글",
    "content": "이순신 장군입니다.",
    "createdAt": "2025-08-03T12:00:00",
    "updatedAt": "2025-08-03T12:00:00",
    "commentCount": 0
  }
]
```

---

#### 8) **결과**

* 게시글과 댓글 개수가 함께 반환됨
* UI에서 댓글 수 뱃지 표시 가능

---

**다음 단계는 `55. 회원별 작성 게시글 조회` 입니다. 진행할까요?**
