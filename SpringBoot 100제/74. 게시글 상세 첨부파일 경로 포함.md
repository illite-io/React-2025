### 74. 게시글 상세 조회 시 첨부파일 경로 포함

---

#### 1) **목표**

* 게시글 상세 조회 시 **첨부파일 리스트**도 함께 반환
* 기존 댓글 + 작성자 정보 포함 구조(50단계)에서 첨부파일 데이터 추가

---

#### 2) **DTO 수정**

**경로**: `src/main/java/com/example/springbootstart/dto/BoardDetailDto.java`

```java
package com.example.springbootstart.dto;

import lombok.Getter;
import lombok.Setter;
import java.util.List;

@Getter
@Setter
public class BoardDetailDto {
    private Long id;
    private String title;
    private String content;
    private String createdAt;
    private String updatedAt;

    private Long writerId;
    private String writerName;
    private String writerEmail;

    private List<CommentWithUserDto> comments;   // 기존 댓글
    private List<BoardFileDto> files;            // 추가된 첨부파일 목록
}
```

---

#### 3) **Service 수정**

**경로**: `src/main/java/com/example/springbootstart/service/BoardService.java`

```java
import com.example.springbootstart.dto.BoardFileDto;

public BoardDetailDto getBoardDetail(Long id) {
    BoardDetailDto board = boardMapper.findBoardDetail(id);
    if (board != null) {
        board.setComments(boardMapper.findCommentsWithUser(id));  // 기존 댓글 로딩
        List<BoardFileDto> files = boardFileMapper.findFilesByBoardId(id); // 첨부파일 조회
        board.setFiles(files);
    }
    return board;
}
```

> **주의:** `boardFileMapper` 주입 필요 → `@Autowired` 또는 생성자 주입

---

#### 4) **Controller (변경 없음)**

**경로**: `src/main/java/com/example/springbootstart/controller/BoardController.java`

```java
@GetMapping("/detail/{id}")
public ResponseEntity<?> getBoardDetail(@PathVariable Long id) {
    BoardDetailDto boardDetail = boardService.getBoardDetail(id);
    return boardDetail != null ? ResponseEntity.ok(boardDetail)
                               : ResponseEntity.notFound().build();
}
```

---

#### 5) **테스트**

**GET 요청**

```
GET /boards/detail/1
```

**응답(JSON 예시)**

```json
{
  "id": 1,
  "title": "첫 번째 게시글",
  "content": "내용",
  "createdAt": "2025-08-03T12:00:00",
  "updatedAt": "2025-08-03T12:00:00",
  "writerId": 1,
  "writerName": "홍길동",
  "writerEmail": "hong@test.com",
  "comments": [
    {
      "id": 10,
      "content": "첫 댓글",
      "writerId": 2,
      "writerName": "이순신"
    }
  ],
  "files": [
    {
      "id": 5,
      "fileName": "문서.pdf",
      "filePath": "files/8a73b..._문서.pdf"
    },
    {
      "id": 6,
      "fileName": "이미지.jpg",
      "filePath": "files/12a2c..._이미지.jpg"
    }
  ]
}
```

---

### 결과

* 게시글 상세 조회 시 첨부파일 정보까지 포함됨
* 프론트엔드에서 상세 화면에 첨부파일 리스트 출력 가능

---

**다음 단계는 `75. 게시글 삭제 시 첨부파일 자동 삭제` 입니다. 진행할까요?**
