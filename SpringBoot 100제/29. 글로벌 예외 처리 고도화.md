### 29. MyBatis SQL 매퍼 XML 작성

---

#### 1) **파일 경로 및 이름**

* **경로**: `src/main/resources/mapper/UserMapper.xml`

---

#### 2) **Mapper XML 기본 구조**

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.springbootstart.mapper.UserMapper">
    <!-- SQL 문 작성 -->
</mapper>
```

* `namespace`: Mapper 인터페이스 패키지+이름과 동일해야 함

---

#### 3) **SQL 매핑**

**UserMapper.xml 전체 예시**

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.springbootstart.mapper.UserMapper">

    <!-- DTO와 컬럼 매핑 -->
    <resultMap id="userMap" type="com.example.springbootstart.dto.UserDto">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="age" column="age"/>
        <result property="email" column="email"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>

    <!-- 전체 조회 -->
    <select id="findAll" resultMap="userMap">
        SELECT * FROM user
    </select>

    <!-- 단일 조회 -->
    <select id="findById" parameterType="long" resultMap="userMap">
        SELECT * FROM user WHERE id = #{id}
    </select>

    <!-- 삽입 -->
    <insert id="insertUser" parameterType="com.example.springbootstart.dto.UserDto">
        INSERT INTO user (name, age, email)
        VALUES (#{name}, #{age}, #{email})
    </insert>

    <!-- 수정 -->
    <update id="updateUser" parameterType="com.example.springbootstart.dto.UserDto">
        UPDATE user
        SET name = #{name},
            age = #{age},
            email = #{email}
        WHERE id = #{id}
    </update>

    <!-- 삭제 -->
    <delete id="deleteUser" parameterType="long">
        DELETE FROM user WHERE id = #{id}
    </delete>

</mapper>
```

---

#### 4) **SQL 실행 확인**

* `findAll()` → SELECT \* FROM user 실행
* `findById()` → 특정 사용자 반환
* `insertUser()` → 사용자 추가
* `updateUser()` → 사용자 수정
* `deleteUser()` → 사용자 삭제

---

**다음 단계는 `30. MyBatis 연동 테스트` 입니다. 진행할까요?**
