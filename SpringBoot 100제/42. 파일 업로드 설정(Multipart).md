### 42. 게시글 등록 API 작성

---

#### 1) **목표**

* 게시글(제목, 내용, 작성자 ID) 등록 API 구현
* DB: `board` 테이블 사용

---

#### 2) **DTO 작성**

**경로**: `src/main/java/com/example/springbootstart/dto/BoardDto.java`

```java
package com.example.springbootstart.dto;

import lombok.Getter;
import lombok.Setter;
import lombok.ToString;

@Getter
@Setter
@ToString
public class BoardDto {
    private Long id;
    private Long userId;      // 작성자 ID
    private String title;
    private String content;
    private String createdAt;
    private String updatedAt;
}
```

---

#### 3) **Mapper 인터페이스**

**경로**: `src/main/java/com/example/springbootstart/mapper/BoardMapper.java`

```java
package com.example.springbootstart.mapper;

import com.example.springbootstart.dto.BoardDto;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface BoardMapper {
    int insertBoard(BoardDto board);
}
```

---

#### 4) **Mapper XML**

**경로**: `src/main/resources/mapper/BoardMapper.xml`

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.springbootstart.mapper.BoardMapper">

    <insert id="insertBoard" parameterType="com.example.springbootstart.dto.BoardDto">
        INSERT INTO board (user_id, title, content)
        VALUES (#{userId}, #{title}, #{content})
    </insert>

</mapper>
```

---

#### 5) **Service**

**경로**: `src/main/java/com/example/springbootstart/service/BoardService.java`

```java
package com.example.springbootstart.service;

import com.example.springbootstart.dto.BoardDto;
import com.example.springbootstart.mapper.BoardMapper;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class BoardService {
    private final BoardMapper boardMapper;

    public BoardService(BoardMapper boardMapper) {
        this.boardMapper = boardMapper;
    }

    @Transactional
    public int createBoard(BoardDto boardDto) {
        return boardMapper.insertBoard(boardDto);
    }
}
```

---

#### 6) **Controller**

**경로**: `src/main/java/com/example/springbootstart/controller/BoardController.java`

```java
package com.example.springbootstart.controller;

import com.example.springbootstart.dto.BoardDto;
import com.example.springbootstart.service.BoardService;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;

@RestController
@RequestMapping("/boards")
public class BoardController {

    private final BoardService boardService;

    public BoardController(BoardService boardService) {
        this.boardService = boardService;
    }

    // 게시글 등록
    @PostMapping
    public ResponseEntity<?> createBoard(@Valid @RequestBody BoardDto boardDto) {
        int result = boardService.createBoard(boardDto);
        return result == 1
                ? ResponseEntity.ok("게시글 등록 성공")
                : ResponseEntity.badRequest().body("게시글 등록 실패");
    }
}
```

---

#### 7) **테스트 요청**

**POST 요청**:

```
http://localhost:8080/boards
```

**Body(JSON)**:

```json
{
  "userId": 1,
  "title": "새로운 게시글",
  "content": "게시글 내용입니다."
}
```

**응답**

```
게시글 등록 성공
```

---

#### 8) **DB 확인**

```sql
SELECT * FROM board;
```

* 새로운 게시글이 추가되어야 함

---

**다음 단계는 `43. 게시글 조회 API (단건/전체)` 입니다. 진행할까요?**
