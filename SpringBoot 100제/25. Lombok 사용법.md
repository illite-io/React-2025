### 25. MyBatis Mapper 파일 구조 이해

---

#### 1) **Mapper란?**

* **SQL 문장을 XML 또는 어노테이션으로 정의하고, Java 인터페이스와 매핑**하는 역할
* SQL 실행 → 결과를 DTO(또는 VO) 객체에 자동 매핑

---

#### 2) **Mapper 파일 구성 요소**

1. **Mapper Interface (Java)**

   * SQL 호출 메서드 선언
2. **Mapper XML (SQL)**

   * 실제 SQL 쿼리 작성

---

#### 3) **기본 디렉터리 구조**

```
src/main/java/com/example/springbootstart/mapper/
 └─ UserMapper.java

src/main/resources/mapper/
 └─ UserMapper.xml
```

---

#### 4) **UserMapper Interface**

**파일 경로**: `src/main/java/com/example/springbootstart/mapper/UserMapper.java`

```java
package com.example.springbootstart.mapper;

import com.example.springbootstart.dto.UserDto;
import org.apache.ibatis.annotations.Mapper;
import java.util.List;

@Mapper
public interface UserMapper {
    // 사용자 전체 조회
    List<UserDto> findAll();

    // 사용자 단일 조회
    UserDto findById(Long id);

    // 사용자 등록
    int insertUser(UserDto user);

    // 사용자 수정
    int updateUser(UserDto user);

    // 사용자 삭제
    int deleteUser(Long id);
}
```

---

#### 5) **UserMapper XML**

**파일 경로**: `src/main/resources/mapper/UserMapper.xml`

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.springbootstart.mapper.UserMapper">

    <resultMap id="userMap" type="com.example.springbootstart.dto.UserDto">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="age" column="age"/>
        <result property="email" column="email"/>
    </resultMap>

    <select id="findAll" resultMap="userMap">
        SELECT * FROM user
    </select>

    <select id="findById" parameterType="long" resultMap="userMap">
        SELECT * FROM user WHERE id = #{id}
    </select>

    <insert id="insertUser" parameterType="com.example.springbootstart.dto.UserDto">
        INSERT INTO user (name, age, email)
        VALUES (#{name}, #{age}, #{email})
    </insert>

    <update id="updateUser" parameterType="com.example.springbootstart.dto.UserDto">
        UPDATE user SET
            name = #{name},
            age = #{age},
            email = #{email}
        WHERE id = #{id}
    </update>

    <delete id="deleteUser" parameterType="long">
        DELETE FROM user WHERE id = #{id}
    </delete>

</mapper>
```

---

#### 6) **매핑 방식**

* `namespace`: Mapper 인터페이스와 연결
* `id`: 인터페이스 메서드 이름과 동일해야 함
* `parameterType`: 전달받을 파라미터 타입
* `resultMap` 또는 `resultType`: 반환할 객체 매핑 방식

---

**다음 단계는 `26. Mapper 인터페이스와 XML 연동` 입니다. 진행할까요?**
