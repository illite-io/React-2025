### 18. RequestParam 사용법

---

#### 1) **RequestParam이란?**

* **쿼리 스트링(Query String)** 형태로 전달된 값을 가져오는 방법
* URL에 `?` 뒤에 오는 데이터를 처리할 때 사용

---

#### 2) **사용 예시**

URL 예:

```
http://localhost:8080/search?keyword=스프링&sort=asc
```

* keyword → `스프링`
* sort → `asc`

---

#### 3) **코드 작성**

**파일 경로**: `src/main/java/com/example/springbootstart/controller/RequestParamController.java`

```java
package com.example.springbootstart.controller;

import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/search")
public class RequestParamController {

    // 단일 쿼리 파라미터 받기
    @GetMapping("/single")
    public String searchSingle(@RequestParam String keyword) {
        return "검색어: " + keyword;
    }

    // 여러 개의 쿼리 파라미터 받기
    @GetMapping("/multi")
    public String searchMulti(
            @RequestParam String keyword,
            @RequestParam(defaultValue = "asc") String sort) {
        return "검색어: " + keyword + ", 정렬: " + sort;
    }

    // 쿼리 파라미터를 Map으로 받기
    @GetMapping("/map")
    public String searchMap(@RequestParam java.util.Map<String, String> params) {
        return "검색 파라미터: " + params.toString();
    }
}
```

---

#### 4) **실행 확인**

1. `http://localhost:8080/search/single?keyword=스프링`
   → 응답: `검색어: 스프링`
2. `http://localhost:8080/search/multi?keyword=Spring&sort=desc`
   → 응답: `검색어: Spring, 정렬: desc`
3. `http://localhost:8080/search/map?keyword=Java&sort=asc`
   → 응답: `검색 파라미터: {keyword=Java, sort=asc}`

---

#### 5) **주의점**

* `required = false` → 파라미터 선택적 사용 가능
* `defaultValue` → 값이 없을 때 기본값 설정 가능

---

**다음 단계는 `19. RequestBody와 ResponseEntity 사용법` 입니다. 진행할까요?**


### 19. RequestBody와 ResponseEntity 사용법

---

#### 1) **@RequestBody란?**

* \*\*HTTP 요청의 Body(JSON 등)\*\*를 Java 객체로 변환
* 보통 **POST, PUT, PATCH** 메서드에서 사용
* Jackson 라이브러리(스프링 기본 내장)가 자동으로 JSON ↔ 객체 변환 처리

---

#### 2) **@ResponseBody란?**

* **메서드의 반환값을 JSON 형태로 HTTP 응답 바디에 직접 작성**
* `@RestController` 사용 시 기본 적용됨 → 따로 안 붙여도 됨

---

#### 3) **ResponseEntity란?**

* **HTTP 응답 전체(상태 코드 + 헤더 + 바디)를 직접 제어** 가능
* 성공/실패 시 서로 다른 상태 코드 반환에 유용

---

#### 4) **DTO 클래스**

**경로**: `src/main/java/com/example/springbootstart/dto/UserDto.java`
(이전 단계에서 만든 것 그대로 사용)

---

#### 5) **Controller 코드**

**경로**: `src/main/java/com/example/springbootstart/controller/RequestBodyResponseEntityController.java`

```java
package com.example.springbootstart.controller;

import com.example.springbootstart.dto.UserDto;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api")
public class RequestBodyResponseEntityController {

    // @RequestBody 사용 → JSON → 객체 자동 변환
    @PostMapping("/user")
    public ResponseEntity<String> createUser(@RequestBody UserDto user) {
        // 데이터 처리 로직 (예: DB 저장) 생략
        String response = "이름: " + user.getName() + ", 나이: " + user.getAge();

        // 상태 코드 201 Created 반환
        return new ResponseEntity<>(response, HttpStatus.CREATED);
    }

    // 성공/실패 상태 코드 분기 처리
    @GetMapping("/user/{id}")
    public ResponseEntity<?> getUser(@PathVariable Long id) {
        if (id == 1L) {
            UserDto user = new UserDto();
            user.setName("홍길동");
            user.setAge(30);
            return ResponseEntity.ok(user);  // 200 OK
        } else {
            return ResponseEntity.status(HttpStatus.NOT_FOUND)
                    .body("사용자를 찾을 수 없습니다.");
        }
    }
}
```

---

#### 6) **실행 확인**

**POST 요청 (JSON Body)**

```json
{
  "name": "이순신",
  "age": 40
}
```

응답:

```
HTTP/1.1 201 Created
이름: 이순신, 나이: 40
```

**GET 요청**

* `http://localhost:8080/api/user/1` → JSON 객체 반환
* `http://localhost:8080/api/user/2` → 404 상태 + "사용자를 찾을 수 없습니다."

---

#### 7) **장점**

* 요청/응답 구조를 **표준화**할 수 있음
* 상태 코드를 적절히 설정하여 **클라이언트에서 에러 처리 용이**

---

**다음 단계는 `20. API 응답 포맷 표준화 (성공/실패 응답)` 입니다. 진행할까요?**
