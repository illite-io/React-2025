ê²Œì‹œíŒì˜ \*\*ì“°ê¸°(create)\*\*ì™€ **ìˆ˜ì •(edit)** ê¸°ëŠ¥ì„ **í•œ í˜ì´ì§€ì—ì„œ í•¨ê»˜ ì²˜ë¦¬í•˜ëŠ” ì˜ˆì‹œ**ë¥¼ ì•„ë˜ì— ì„¤ëª…ë“œë¦´ê²Œìš”.

---

## âœ… ê¸°ë³¸ ê°œë…

* `ê¸€ì“°ê¸°`: ì´ˆê¸°ê°’ ì—†ì´ ì…ë ¥ë°›ì•„ ìƒˆ ê¸€ ìƒì„±
* `ìˆ˜ì •í•˜ê¸°`: ê¸°ì¡´ ê²Œì‹œê¸€ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ìˆ˜ì • í›„ ì €ì¥

ë‘˜ ë‹¤ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë˜ **URL íŒŒë¼ë¯¸í„° (ì˜ˆ: `/write` vs `/edit/:id`)** ë˜ëŠ” **props**ë¥¼ í†µí•´ êµ¬ë¶„í•©ë‹ˆë‹¤.

---

## âœ… ì˜ˆì‹œ êµ¬ì¡°

```bash
/src
 â””â”€â”€ pages
     â””â”€â”€ BoardForm.jsx   â† ê¸€ì“°ê¸°/ìˆ˜ì • ê³µí†µ ì»´í¬ë„ŒíŠ¸
```

---

## âœ… ë¼ìš°í„° ì„¤ì • ì˜ˆì‹œ (`App.js` ë˜ëŠ” `routes.js`)

```jsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
import BoardForm from "./pages/BoardForm";

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/write" element={<BoardForm mode="create" />} />
        <Route path="/edit/:id" element={<BoardForm mode="edit" />} />
      </Routes>
    </BrowserRouter>
  );
}
```

* `/write`: ìƒˆ ê¸€ ì‘ì„±
* `/edit/:id`: ê¸°ì¡´ ê¸€ ìˆ˜ì •

---

## âœ… ê¸€ì“°ê¸°/ìˆ˜ì • í˜ì´ì§€ `BoardForm.jsx`

```jsx
// ğŸ“„ /src/pages/BoardForm.jsx

import { useEffect, useState } from "react";
import { useParams, useNavigate } from "react-router-dom";
import axios from "axios";

const BoardForm = ({ mode }) => {
  const { id } = useParams(); // ìˆ˜ì • ëª¨ë“œì¼ ê²½ìš° ê²Œì‹œê¸€ id
  const navigate = useNavigate();
  const [form, setForm] = useState({ title: "", content: "" });

  // âœ¨ ìˆ˜ì • ëª¨ë“œì¼ ë•Œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    if (mode === "edit" && id) {
      axios.get(`/api/posts/${id}`).then((res) => {
        setForm({ title: res.data.title, content: res.data.content });
      });
    }
  }, [mode, id]);

  // âœï¸ ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬
  const onChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  // âœ… ì €ì¥ (ì“°ê¸° ë˜ëŠ” ìˆ˜ì •)
  const onSubmit = async (e) => {
    e.preventDefault();

    if (mode === "create") {
      await axios.post("/api/posts", form);
    } else if (mode === "edit" && id) {
      await axios.put(`/api/posts/${id}`, form);
    }

    navigate("/board"); // ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
  };

  return (
    <div>
      <h2>{mode === "create" ? "ê¸€ì“°ê¸°" : "ê¸€ìˆ˜ì •"}</h2>
      <form onSubmit={onSubmit}>
        <input
          type="text"
          name="title"
          value={form.title}
          onChange={onChange}
          placeholder="ì œëª©"
        />
        <br />
        <textarea
          name="content"
          value={form.content}
          onChange={onChange}
          placeholder="ë‚´ìš©"
        />
        <br />
        <button type="submit">{mode === "create" ? "ë“±ë¡" : "ìˆ˜ì •"}</button>
      </form>
    </div>
  );
};

export default BoardForm;
```

---

## âœ… ìš”ì•½

| êµ¬ë¶„  | ë¼ìš°íŠ¸         | ë™ì‘                       |
| --- | ----------- | ------------------------ |
| ê¸€ì“°ê¸° | `/write`    | ë¹ˆ ì…ë ¥ê°’ìœ¼ë¡œ ê²Œì‹œê¸€ ì‘ì„±           |
| ê¸€ìˆ˜ì • | `/edit/:id` | ê¸°ì¡´ ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ìˆ˜ì • í›„ ì €ì¥ |

---

í•„ìš”í•˜ë©´ Ant Design í¼, React Hook Form, Yup ë“±ì„ ê°™ì´ ì ìš©í•´ì„œ í™•ì¥ë„ ê°€ëŠ¥í•´ìš”. ì›í•˜ë©´ ê·¸ ì˜ˆì‹œë„ ë§Œë“¤ì–´ì¤„ê²Œìš”.

`.` ì…ë ¥ ì‹œ ë‹¤ìŒ ê¸°ëŠ¥ í™•ì¥ ì˜ˆì‹œ ë³´ì—¬ë“œë¦´ê²Œìš”.


ì¢‹ìŠµë‹ˆë‹¤! `BoardForm.jsx` í˜ì´ì§€ì— `Select`, `Radio` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•´ì„œ ê²Œì‹œê¸€ **ì¹´í…Œê³ ë¦¬ ì„ íƒ**ì´ë‚˜ **ê³µê°œ ì—¬ë¶€** ê°™ì€ í•­ëª©ì„ ê³ ë¥´ëŠ” ì˜ˆì‹œë¥¼ ë³´ì—¬ë“œë¦´ê²Œìš”.

---

## âœ… ì ìš© ì˜ˆì‹œ: `ì¹´í…Œê³ ë¦¬ ì„ íƒ` (Select), `ê³µê°œ ì—¬ë¶€ ì„ íƒ` (Radio)

### ğŸ”§ ì—…ë°ì´íŠ¸ëœ `BoardForm.jsx`

```jsx
// ğŸ“„ /src/pages/BoardForm.jsx

import { useEffect, useState } from "react";
import { useParams, useNavigate } from "react-router-dom";
import axios from "axios";

const BoardForm = ({ mode }) => {
  const { id } = useParams();
  const navigate = useNavigate();

  // âœ¨ form ìƒíƒœê°’ ì´ˆê¸°ê°’ ì„¤ì • (ì¶”ê°€ëœ category, visibility í¬í•¨)
  const [form, setForm] = useState({
    title: "",
    content: "",
    category: "free", // ê¸°ë³¸ê°’: ììœ ê²Œì‹œíŒ
    visibility: "public", // ê¸°ë³¸ê°’: ê³µê°œ
  });

  // âœ¨ ìˆ˜ì •ëª¨ë“œì¼ ê²½ìš° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  useEffect(() => {
    if (mode === "edit" && id) {
      axios.get(`/api/posts/${id}`).then((res) => {
        const { title, content, category, visibility } = res.data;
        setForm({ title, content, category, visibility });
      });
    }
  }, [mode, id]);

  // âœï¸ ì…ë ¥ ë³€ê²½ í•¸ë“¤ëŸ¬ (input, textarea, select, radio ê³µí†µ)
  const onChange = (e) => {
    const { name, value } = e.target;
    setForm((prev) => ({ ...prev, [name]: value }));
  };

  // âœ… ì €ì¥
  const onSubmit = async (e) => {
    e.preventDefault();
    if (mode === "create") {
      await axios.post("/api/posts", form);
    } else if (mode === "edit" && id) {
      await axios.put(`/api/posts/${id}`, form);
    }
    navigate("/board");
  };

  return (
    <div>
      <h2>{mode === "create" ? "ê¸€ì“°ê¸°" : "ê¸€ìˆ˜ì •"}</h2>
      <form onSubmit={onSubmit}>
        {/* ì œëª© */}
        <input
          type="text"
          name="title"
          value={form.title}
          onChange={onChange}
          placeholder="ì œëª©"
        />
        <br />

        {/* ì¹´í…Œê³ ë¦¬ ì„ íƒ - Select */}
        <label>
          ì¹´í…Œê³ ë¦¬:
          <select name="category" value={form.category} onChange={onChange}>
            <option value="free">ììœ ê²Œì‹œíŒ</option>
            <option value="qna">ì§ˆë¬¸ë‹µë³€</option>
            <option value="notice">ê³µì§€ì‚¬í•­</option>
          </select>
        </label>
        <br />

        {/* ê³µê°œ ì—¬ë¶€ - Radio */}
        <label>
          ê³µê°œ ì—¬ë¶€:
          <label>
            <input
              type="radio"
              name="visibility"
              value="public"
              checked={form.visibility === "public"}
              onChange={onChange}
            />
            ê³µê°œ
          </label>
          <label>
            <input
              type="radio"
              name="visibility"
              value="private"
              checked={form.visibility === "private"}
              onChange={onChange}
            />
            ë¹„ê³µê°œ
          </label>
        </label>
        <br />

        {/* ë‚´ìš© */}
        <textarea
          name="content"
          value={form.content}
          onChange={onChange}
          placeholder="ë‚´ìš©"
        />
        <br />

        <button type="submit">{mode === "create" ? "ë“±ë¡" : "ìˆ˜ì •"}</button>
      </form>
    </div>
  );
};

export default BoardForm;
```

---

## âœ… ì¶”ê°€ ì„¤ëª…

| í•­ëª©        | ì„¤ëª…                        |
| --------- | ------------------------- |
| `select`  | ê²Œì‹œê¸€ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒ (ììœ , ì§ˆë¬¸, ê³µì§€) |
| `radio`   | ê³µê°œ ì—¬ë¶€ ì„ íƒ (ê³µê°œ / ë¹„ê³µê°œ)       |
| `value`   | form ìƒíƒœê°’ì— ë”°ë¼ ìë™ ì„ íƒ        |
| `checked` | ë¼ë””ì˜¤ ë²„íŠ¼ì˜ ì„ íƒ ìƒíƒœ ìœ ì§€          |

---

í•„ìš”í•˜ë©´ `select`ì— ë‹¤êµ­ì–´ ì ìš©, `radio`ë¥¼ ì»¤ìŠ¤í…€ UIë¡œ ë°”ê¾¸ëŠ” ì˜ˆì‹œë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

`.` ì…ë ¥ ì‹œ `React Hook Form + Yup ìœ íš¨ì„±ê²€ì‚¬`ë¡œ í™•ì¥ ì˜ˆì‹œ ë³´ì—¬ë“œë¦´ê²Œìš”.


ì•„ë˜ëŠ” `form.m`ì— `ms` ìƒíƒœê°’ì„ í¬í•¨ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì •í™•í•˜ê³  ì•ˆì „í•˜ê²Œ ë³´ì—¬ì£¼ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.

---

## âœ… ëª©í‘œ

* `form.m`ì— `ms` ë°°ì—´ ì „ì²´ë¥¼ **ë°˜ì˜ (ë™ê¸°í™”)** í•˜ë ¤ëŠ” ê²ƒ
* ì¦‰, `form.m = ms` í˜•íƒœë¡œ ì €ì¥í•˜ë˜, ìƒíƒœê´€ë¦¬ ì›ì¹™ì— ë§ê²Œ ì²˜ë¦¬

---

## âœ… ì˜ˆì‹œ ì½”ë“œ

```jsx
import { useState, useEffect } from "react";

const ExampleComponent = () => {
  // âœ… form ìƒíƒœ: mì€ ë°°ì—´
  const [form, setForm] = useState({ m: [] });

  // âœ… ms ìƒíƒœ: ë°°ì—´ ê°ì²´ë“¤
  const [ms, setMs] = useState([{ name: "John" }, { name: "Jane" }]);

  // âœ… ms ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ form.mì— ë°˜ì˜
  useEffect(() => {
    setForm((prev) => ({ ...prev, m: ms }));
  }, [ms]);

  return (
    <div>
      <pre>{JSON.stringify(form, null, 2)}</pre>
    </div>
  );
};
```

---

## âœ… ì„¤ëª…

| ì½”ë“œ                     | ì„¤ëª…                    |
| ---------------------- | --------------------- |
| `useEffect(..., [ms])` | `ms` ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë¨   |
| `setForm(...m: ms)`    | `form.m` ê°’ì„ `ms`ë¡œ ë®ì–´ì”€ |
| `...prev`              | ê¸°ì¡´ì˜ ë‹¤ë¥¸ form í•­ëª©ì„ ìœ ì§€í•¨   |

---

## âœ… ë§Œì•½ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ìˆ˜ë™ ë°˜ì˜í•˜ê³  ì‹¶ë‹¤ë©´?

```jsx
const applyMsToForm = () => {
  setForm((prev) => ({ ...prev, m: ms }));
};
```

---

## âœ… ê²°ê³¼ í˜•íƒœ ì˜ˆì‹œ

```json
{
  "m": [
    { "name": "John" },
    { "name": "Jane" }
  ]
}
```

---

í•„ìš” ì‹œ `ms` ë°°ì—´ì—ì„œ íŠ¹ì • í•„ë“œë§Œ ê³¨ë¼ `form.m`ì— ì €ì¥í•˜ê±°ë‚˜ `deep copy` ì²˜ë¦¬ë„ ê°€ëŠ¥í•´ìš”.
ì›í•˜ë©´ ê·¸ê²ƒë„ ì¶”ê°€ë¡œ ì•Œë ¤ë“œë¦´ê²Œìš”.
